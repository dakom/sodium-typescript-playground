module.exports = { contents: "\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Ticker_1 = require(\"../../../lib/time/Ticker\");\r\nvar Main_1 = require(\"../../main/Main\");\r\nvar sodiumjs_1 = require(\"sodiumjs\");\r\nvar SelfDisposingContainer_1 = require(\"../../../lib/display/SelfDisposingContainer\");\r\nvar Bunny_1 = require(\"./Bunny\");\r\nvar Bunnies_UI_1 = require(\"./Bunnies_UI\");\r\nvar Bunny_Motion_1 = require(\"./Bunny_Motion\");\r\nvar R = require(\"ramda\");\r\nvar TOUCH;\r\n(function (TOUCH) {\r\n    TOUCH[TOUCH[\"DOWN\"] = 0] = \"DOWN\";\r\n    TOUCH[TOUCH[\"UP\"] = 1] = \"UP\";\r\n})(TOUCH || (TOUCH = {}));\r\nvar Bunnies = (function (_super) {\r\n    __extends(Bunnies, _super);\r\n    function Bunnies() {\r\n        var _this = _super.call(this) || this;\r\n        //ui\r\n        var bounds = new PIXI.Rectangle(0, 0, Main_1.CanvasWidth, Main_1.CanvasHeight);\r\n        var ui = new Bunnies_UI_1.UI();\r\n        var bunnyContainer = new PIXI.Container();\r\n        _this.addChild(bunnyContainer);\r\n        _this.addChild(ui.status);\r\n        //time\r\n        var ticker = new Ticker_1.Ticker();\r\n        //local containers\r\n        var unlisteners = new Array();\r\n        var bunnies = new Array();\r\n        //logic\r\n        //note that in this example we're using a gate() to control the load-ready status rather than a listener\r\n        var cTouch = new sodiumjs_1.CellSink(TOUCH.UP);\r\n        var cLoad = ui.load(); //load ui assets\r\n        var sTicksReady = ticker.sTicks.gate(cLoad); //prevent anything from happening until ui is loaded\r\n        var sCreating = sTicksReady.gate(cTouch.map(function (t) { return t == TOUCH.DOWN ? true : false; })); //don't make bunnies unless mouse is down\r\n        unlisteners.push(cLoad.listen(function () {\r\n            Main_1.Main.app.renderer.plugins.interaction.on('pointerdown', sendTouchDown);\r\n            Main_1.Main.app.renderer.plugins.interaction.on('pointerup', sendTouchUp);\r\n        }), sTicksReady.listen(function () {\r\n            bunnies.forEach(function (b) {\r\n                //note - there was an attempt to use cells for this but it was far less performant\r\n                //still, there's very little \"side effects\" - just bunny.render() and it's over here in listen anyway\r\n                b.render(Bunny_Motion_1.UpdateMotion(b.motion, bounds));\r\n            });\r\n        }), sCreating.listen(function () {\r\n            //Create bunnies while mouse is down\r\n            R.repeat(function () { return new Bunny_1.Bunny(ui.texture); }, 100)\r\n                .forEach(function (bunnyF) {\r\n                var bunny = bunnyF();\r\n                bunnyContainer.addChild(bunny);\r\n                bunnies.push(bunny);\r\n            });\r\n            ui.updateStatus(bunnies.length + \" bunnies!\");\r\n        }));\r\n        //function helpers\r\n        function sendTouchDown() {\r\n            cTouch.send(TOUCH.DOWN);\r\n        }\r\n        function sendTouchUp() {\r\n            cTouch.send(TOUCH.UP);\r\n        }\r\n        //cleanup\r\n        _this._dispose = function () {\r\n            Main_1.Main.app.renderer.plugins.interaction.off('pointerdown', sendTouchDown);\r\n            Main_1.Main.app.renderer.plugins.interaction.off('pointerup', sendTouchUp);\r\n            unlisteners.forEach(function (unlistener) { return unlistener(); });\r\n            ticker.dispose();\r\n            ui.dispose();\r\n        };\r\n        return _this;\r\n    }\r\n    Bunnies.prototype.dispose = function () {\r\n        this._dispose();\r\n    };\r\n    return Bunnies;\r\n}(SelfDisposingContainer_1.SelfDisposingContainer));\r\nexports.Bunnies = Bunnies;\r\n//# sourceMappingURL=Bunnies.js.map",
dependencies: ["../../../lib/time/Ticker","../../main/Main","sodiumjs","../../../lib/display/SelfDisposingContainer","./Bunny","./Bunnies_UI","./Bunny_Motion","ramda"],
sourceMap: "{\"version\":3,\"file\":\"app/modules/bunnies/Bunnies.js\",\"sourceRoot\":\"\",\"sources\":[\"/src/app/modules/bunnies/Bunnies.ts\"],\"names\":[],\"mappings\":\"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\"}",
headerContent: undefined,
mtime: 1504029030237,
devLibsRequired : undefined
};