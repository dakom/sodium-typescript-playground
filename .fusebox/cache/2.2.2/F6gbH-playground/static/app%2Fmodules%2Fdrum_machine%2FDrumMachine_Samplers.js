module.exports = { contents: "\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar SelfDisposingContainer_1 = require(\"../../../lib/display/SelfDisposingContainer\");\r\nvar DrumMachine_UI_1 = require(\"./DrumMachine_UI\");\r\nvar sodiumjs_1 = require(\"sodiumjs\");\r\nvar PrimitiveFuncs_1 = require(\"../../../lib/funcs/PrimitiveFuncs\");\r\nvar DrumMachine_Config_1 = require(\"./DrumMachine_Config\");\r\nvar R = require(\"ramda\");\r\nvar Block = (function () {\r\n    function Block(displayTarget, initialActive) {\r\n        var _this = this;\r\n        displayTarget.interactive = displayTarget.buttonMode = true;\r\n        sodiumjs_1.Transaction.run(function () {\r\n            var cActive = new sodiumjs_1.CellLoop();\r\n            var sTouch = new sodiumjs_1.StreamSink();\r\n            var sUpdate = sTouch.snapshot(cActive, function (evt, active) { return !active; });\r\n            cActive.loop(sUpdate.hold(initialActive));\r\n            displayTarget.on('pointerdown', function (evt) { return sTouch.send(evt); });\r\n            _this.dispose = cActive.listen(function (selected) { return displayTarget.redraw(selected); });\r\n            _this._cActive = cActive;\r\n        });\r\n    }\r\n    Object.defineProperty(Block.prototype, \"cActive\", {\r\n        get: function () {\r\n            return this._cActive;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return Block;\r\n}());\r\nvar Row = (function (_super) {\r\n    __extends(Row, _super);\r\n    function Row(sampleId, activeBlocks) {\r\n        var _this = _super.call(this) || this;\r\n        _this.sampleId = sampleId;\r\n        var row = new DrumMachine_UI_1.Row_UI(0x0000ff, 0x2a2a2a);\r\n        _this.addChild(row);\r\n        _this.blocks = row.children.map(function (graphics, index) { return new Block(graphics, activeBlocks.indexOf(index) !== -1); });\r\n        return _this;\r\n    }\r\n    return Row;\r\n}(PIXI.Container));\r\nvar Samplers = (function (_super) {\r\n    __extends(Samplers, _super);\r\n    function Samplers(sampleIds) {\r\n        var _this = _super.call(this) || this;\r\n        _this.rows = _this.makeRows(sampleIds);\r\n        _this.rows.forEach(function (row) { return _this.addChild(row); });\r\n        return _this;\r\n    }\r\n    //iterate over the rows and get the sampleId if the column (measure index) is active\r\n    Samplers.prototype.getSamples = function (cMeasure) {\r\n        var _this = this;\r\n        return sodiumjs_1.Cell.switchC(cMeasure.map(function (index) {\r\n            return PrimitiveFuncs_1.CellSequence(_this.rows.map(function (row) {\r\n                return row.blocks[index].cActive.map(function (active) { return active ? row.sampleId : \"\"; });\r\n            }));\r\n        }))\r\n            .map(function (sampleIds) { return sampleIds.filter(function (sample) { return sample !== \"\"; }); });\r\n    };\r\n    Samplers.prototype.makeRows = function (sampleIds) {\r\n        var rows = sampleIds.map(function (sound, index) { return new Row(sound, DrumMachine_Config_1.RowConfig(index)); });\r\n        var positions = PrimitiveFuncs_1.spreadPosition(10, \"height\", rows);\r\n        R.zipWith(function (ref, y) { return ref.y = y; }, rows, positions);\r\n        return rows;\r\n    };\r\n    Samplers.prototype.dispose = function () {\r\n        this.rows.forEach(function (row) {\r\n            return row.blocks.forEach(function (block) { return block.dispose(); });\r\n        });\r\n    };\r\n    return Samplers;\r\n}(SelfDisposingContainer_1.SelfDisposingContainer));\r\nexports.Samplers = Samplers;\r\n//# sourceMappingURL=DrumMachine_Samplers.js.map",
dependencies: ["../../../lib/display/SelfDisposingContainer","./DrumMachine_UI","sodiumjs","../../../lib/funcs/PrimitiveFuncs","./DrumMachine_Config","ramda"],
sourceMap: "{\"version\":3,\"file\":\"app/modules/drum_machine/DrumMachine_Samplers.js\",\"sourceRoot\":\"\",\"sources\":[\"/src/app/modules/drum_machine/DrumMachine_Samplers.ts\"],\"names\":[],\"mappings\":\";;;;;;;;;;;;AACA,sFAAqF;AACrF,mDAAoD;AACpD,qCAAqF;AACrF,oEAAiF;AACjF,2DAA+C;AAC/C,yBAA2B;AAE3B;IAKI,eAAY,aAAuB,EAAE,aAAqB;QAA1D,iBAgBC;QAfG,aAAa,CAAC,WAAW,GAAG,aAAa,CAAC,UAAU,GAAG,IAAI,CAAC;QAE5D,sBAAW,CAAC,GAAG,CAAC;YAEZ,IAAM,OAAO,GAAG,IAAI,mBAAQ,EAAW,CAAC;YACxC,IAAM,MAAM,GAAG,IAAI,qBAAU,EAAqC,CAAC;YAEnE,IAAM,OAAO,GAAG,MAAM,CAAC,QAAQ,CAAC,OAAO,EAAE,UAAC,GAAG,EAAE,MAAM,IAAK,OAAA,CAAC,MAAM,EAAP,CAAO,CAAC,CAAC;YACnE,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC;YAE1C,aAAa,CAAC,EAAE,CAAC,aAAa,EAAE,UAAA,GAAG,IAAI,OAAA,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,EAAhB,CAAgB,CAAC,CAAC;YAEzD,KAAI,CAAC,OAAO,GAAG,OAAO,CAAC,MAAM,CAAC,UAAA,QAAQ,IAAI,OAAA,aAAa,CAAC,MAAM,CAAC,QAAQ,CAAC,EAA9B,CAA8B,CAAC,CAAC;YAC1E,KAAI,CAAC,QAAQ,GAAG,OAAO,CAAC;QAC5B,CAAC,CAAC,CAAC;IACP,CAAC;IAED,sBAAW,0BAAO;aAAlB;YACI,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC;QACzB,CAAC;;;OAAA;IACL,YAAC;AAAD,CAAC,AA1BD,IA0BC;AAED;IAAkB,uBAAc;IAG5B,aAA4B,QAAgB,EAAE,YAA0B;QAAxE,YACI,iBAAO,SAKV;QAN2B,cAAQ,GAAR,QAAQ,CAAQ;QAExC,IAAM,GAAG,GAAG,IAAI,uBAAM,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC;QAC3C,KAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;QAEnB,KAAI,CAAC,MAAM,GAAG,GAAG,CAAC,QAAQ,CAAC,GAAG,CAAC,UAAC,QAAQ,EAAE,KAAK,IAAK,OAAA,IAAI,KAAK,CAAC,QAAoB,EAAE,YAAY,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,EAAnE,CAAmE,CAAC,CAAC;;IAC7H,CAAC;IACL,UAAC;AAAD,CAAC,AAVD,CAAkB,IAAI,CAAC,SAAS,GAU/B;AAED;IAA8B,4BAAsB;IAGhD,kBAAY,SAAuB;QAAnC,YACI,iBAAO,SAIV;QAFG,KAAI,CAAC,IAAI,GAAG,KAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;QACrC,KAAI,CAAC,IAAI,CAAC,OAAO,CAAC,UAAA,GAAG,IAAI,OAAA,KAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAlB,CAAkB,CAAC,CAAC;;IACjD,CAAC;IAED,oFAAoF;IAC7E,6BAAU,GAAjB,UAAkB,QAAsB;QAAxC,iBASC;QARG,MAAM,CAAC,eAAI,CAAC,OAAO,CACf,QAAQ,CAAC,GAAG,CAAC,UAAA,KAAK;YACd,OAAA,6BAAY,CAAC,KAAI,CAAC,IAAI,CAAC,GAAG,CAAC,UAAA,GAAG;gBAC1B,OAAA,GAAG,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,UAAA,MAAM,IAAI,OAAA,MAAM,GAAG,GAAG,CAAC,QAAQ,GAAG,EAAE,EAA1B,CAA0B,CAAC;YAAnE,CAAmE,CAAC,CACvE;QAFD,CAEC,CACJ,CACJ;aACA,GAAG,CAAC,UAAA,SAAS,IAAI,OAAA,SAAS,CAAC,MAAM,CAAC,UAAA,MAAM,IAAI,OAAA,MAAM,KAAK,EAAE,EAAb,CAAa,CAAC,EAAzC,CAAyC,CAAC,CAAC;IACjE,CAAC;IAGD,2BAAQ,GAAR,UAAS,SAAS;QACd,IAAM,IAAI,GAAG,SAAS,CAAC,GAAG,CAAC,UAAC,KAAK,EAAE,KAAK,IAAK,OAAA,IAAI,GAAG,CAAC,KAAK,EAAE,8BAAS,CAAC,KAAK,CAAC,CAAC,EAAhC,CAAgC,CAAC,CAAC;QAC/E,IAAM,SAAS,GAAG,+BAAc,CAAC,EAAE,EAAE,QAAQ,EAAE,IAAI,CAAC,CAAC;QACrD,CAAC,CAAC,OAAO,CAAC,UAAC,GAAG,EAAE,CAAC,IAAK,OAAA,GAAG,CAAC,CAAC,GAAG,CAAC,EAAT,CAAS,EAAE,IAAI,EAAE,SAAS,CAAC,CAAC;QAElD,MAAM,CAAC,IAAI,CAAC;IAChB,CAAC;IAED,0BAAO,GAAP;QACI,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,UAAA,GAAG;YACjB,OAAA,GAAG,CAAC,MAAM,CAAC,OAAO,CAAC,UAAA,KAAK,IAAI,OAAA,KAAK,CAAC,OAAO,EAAE,EAAf,CAAe,CAAC;QAA5C,CAA4C,CAAC,CAAC;IACtD,CAAC;IAEL,eAAC;AAAD,CAAC,AApCD,CAA8B,+CAAsB,GAoCnD;AApCY,4BAAQ\"}",
headerContent: undefined,
mtime: 1504029030253,
devLibsRequired : undefined
};