module.exports = { contents: "\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar sodiumjs_1 = require(\"sodiumjs\");\r\nvar SelfDisposingContainer_1 = require(\"../../../lib/display/SelfDisposingContainer\");\r\nvar Switch_Character_1 = require(\"./Switch_Character\");\r\nvar Switch_Assets_1 = require(\"./Switch_Assets\");\r\nvar Menu_1 = require(\"../../../lib/menu/Menu\");\r\nvar Main_1 = require(\"../../main/Main\");\r\nvar Switch = (function (_super) {\r\n    __extends(Switch, _super);\r\n    function Switch() {\r\n        var _this = _super.call(this) || this;\r\n        //setup & stuff to dispose\r\n        var characterLookup = {\r\n            bird: new Switch_Character_1.Character(new Switch_Character_1.CharacterConfig(\"bird\", 4, 1)),\r\n            dinosaur: new Switch_Character_1.Character(new Switch_Character_1.CharacterConfig(\"terrex\", 19, 5))\r\n        };\r\n        //we don't want to rely on es7 object.values yet...\r\n        var characterList = Object.keys(characterLookup).map(function (key) { return characterLookup[key]; });\r\n        var unlisteners = new Array();\r\n        var assets = new Switch_Assets_1.Assets();\r\n        //get all the loaders of all the characters\r\n        var sLoad = assets.load(characterList\r\n            .map(function (chr) { return chr.getPaths(); })\r\n            .reduce(function (acc, elem) { return acc.concat(elem); }));\r\n        unlisteners.push(sLoad.listen(function (ready) {\r\n            //create the menu (with default set to bird)\r\n            var menu = new Menu_1.Menu(Object.keys(characterLookup).map(function (id) { return Menu_1.CreateMenuItem(id); }), \"bird\");\r\n            menu.y = (Main_1.CanvasHeight - menu.height) - 100;\r\n            menu.x = (Main_1.CanvasWidth - menu.width) / 2;\r\n            _this.addChild(menu);\r\n            //the sprite holder\r\n            var sprite = new PIXI.Sprite();\r\n            sprite.anchor.set(.5, .5);\r\n            sprite.x = Main_1.CanvasWidth / 2;\r\n            sprite.y = Main_1.CanvasHeight / 2;\r\n            _this.addChild(sprite);\r\n            characterList\r\n                .forEach(function (character) {\r\n                character.prepAssets(assets);\r\n            });\r\n            sodiumjs_1.Transaction.run(function () {\r\n                //logic\r\n                var cCharacter = menu.cId.map(function (id) { return characterLookup[id]; });\r\n                unlisteners.push(cCharacter.listen(function (chr) { return sprite.scale.set(chr.config.scale, chr.config.scale); }));\r\n                var cTexture = sodiumjs_1.Cell.switchC(cCharacter.map(function (chr) { return chr.cTexture; }));\r\n                unlisteners.push(cTexture.listen(function (tex) { return setTexture(sprite, tex); }));\r\n            });\r\n        }));\r\n        //helper functions\r\n        function setTexture(spr, tex) {\r\n            if (tex === undefined || tex === null) {\r\n                return;\r\n            }\r\n            spr.texture = tex;\r\n        }\r\n        //cleanup\r\n        _this._dispose = function () {\r\n            unlisteners.forEach(function (unlistener) { return unlistener(); });\r\n            assets.dispose();\r\n            characterList.forEach(function (chr) { return chr.dispose(); });\r\n        };\r\n        return _this;\r\n    }\r\n    Switch.prototype.dispose = function () {\r\n        this._dispose();\r\n    };\r\n    return Switch;\r\n}(SelfDisposingContainer_1.SelfDisposingContainer));\r\nexports.Switch = Switch;\r\n//# sourceMappingURL=Switch.js.map",
dependencies: ["sodiumjs","../../../lib/display/SelfDisposingContainer","./Switch_Character","./Switch_Assets","../../../lib/menu/Menu","../../main/Main"],
sourceMap: "{\"version\":3,\"file\":\"app/modules/switch/Switch.js\",\"sourceRoot\":\"\",\"sources\":[\"/src/app/modules/switch/Switch.ts\"],\"names\":[],\"mappings\":\"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\"}",
headerContent: undefined,
mtime: 1504029030253,
devLibsRequired : undefined
};