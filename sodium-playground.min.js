!function(){var t="undefined"!=typeof window;t||(global.require=require);var e=t?window:global;if(!e.$fsx){var n=e.$fsx={};n.f={},n.m={},n.r=function(t){var e=n.m[t];if(e)return e.m.exports;var r=n.f[t];if(r)return e=n.m[t]={},e.exports={},e.m={exports:e.exports},r(e.m,e.exports),e.m.exports}}}(),function(t){t.f[0]=function(e,n){Object.defineProperty(n,"__esModule",{value:!0});var r=t.r(1),o=t.r(2),i=t.r(7),u=t.r(11),s=t.r(16),a=t.r(20),c=t.r(29),l=t.r(34),f=t.r(38),p=t.r(36);console.log("Starting [Version 003]"),r.Main.Init();var h=r.Main.app.stage,d=new o.Menu([o.CreateMenuItem("simple"),o.CreateMenuItem("bunnies"),o.CreateMenuItem("switch"),o.CreateMenuItem("draw"),o.CreateMenuItem("move","move & tap"),o.CreateMenuItem("drum_machine","drum machine")]);h.addChild(d);var y=new p.FPS;h.addChild(y);var _=d.sClicked.map(function(t){switch(t){case"simple":return new i.Simple;case"bunnies":return new s.Bunnies;case"switch":return new u.Switch;case"draw":return new c.Draw;case"move":return new l.Move;case"drum_machine":return new a.DrumMachine}}).hold(void 0);f.Operational.updates(_).snapshot(_,function(t,e){void 0!==e&&h.removeChild(e),h.addChild(t)}).listen(function(){h.setChildIndex(d,h.children.length-1),h.setChildIndex(y,h.children.length-1)}),d.forceId("simple")},t.f[1]=function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasWidth=1920,e.CanvasHeight=1080;var n=function(){function t(){}return t.Init=function(){var t=this;this.app=new PIXI.Application(e.CanvasWidth,e.CanvasHeight,{backgroundColor:15788754}),document.body.appendChild(this.app.view),window.onresize=function(){return t.ScaleToWindow(t.app.view,"#091D27")},this.ScaleToWindow(this.app.view,"#091D27")},t.ScaleToWindow=function(t,e){function n(){var e=(window.innerWidth-t.offsetWidth*u)/2;t.style.marginTop="0px",t.style.marginBottom="0px",t.style.marginLeft=e+"px",t.style.marginRight=e+"px"}function r(){var e=(window.innerHeight-t.offsetHeight*u)/2;t.style.marginTop=e+"px",t.style.marginBottom=e+"px",t.style.marginLeft="0px",t.style.marginRight="0px"}var o=window.innerWidth/t.offsetWidth,i=window.innerHeight/t.offsetHeight,u=Math.min(o,i);t.style.transformOrigin="0 0",t.style.transform="scale("+u+")",t.offsetWidth>t.offsetHeight?t.offsetWidth*u<window.innerWidth?n():r():t.offsetHeight*u<window.innerHeight?r():n(),t.style.paddingLeft="0px",t.style.paddingRight="0px",t.style.paddingTop="0px",t.style.paddingBottom="0px",t.style.display="block",document.body.style.backgroundColor=e;var s=navigator.userAgent.toLowerCase();return-1!=s.indexOf("safari")&&s.indexOf("chrome"),u},t}();e.Main=n},t.f[2]=function(e,n){var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=t.r(38),i=t.r(3),u=t.r(4);n.CreateMenuItem=function(t,e){return{id:t,label:void 0===e?t:e}};var s=function(t){function e(e,n){var r=t.call(this)||this;return r.configs=e,r.x=10,r.y=10,o.Transaction.run(function(){r._selectedCell=new o.CellLoop;var t=e.map(function(t){return new i.MenuButton(r._selectedCell,t)});r._sClicked=t.map(function(t){return t.sClicked}).reduce(function(t,e){return t.orElse(e)}),r._sForceClicked=new o.StreamSink,r._sClicked=r._sClicked.orElse(r._sForceClicked),r._selectedCell.loop(r._sClicked.hold(n)),u.Menu_SetLayout(t),t.forEach(function(t){return r.addChild(t)})}),r}return r(e,t),e.prototype.forceId=function(t){this._sForceClicked.send(t)},Object.defineProperty(e.prototype,"sClicked",{get:function(){return this._sClicked},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cId",{get:function(){return this._selectedCell},enumerable:!0,configurable:!0}),e}(PIXI.Container);n.Menu=s},t.f[3]=function(e,n){var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=t.r(38),i=t.r(4),u=function(t){function e(e,n){var r=t.call(this)||this;return r._sClicked=new o.StreamSink,r.on("pointerdown",function(t){r._sClicked.send(n.id)}),r.interactive=r.buttonMode=!0,r.unlisten=e.map(function(t){return t==n.id}).listen(function(t){return r.render(n.label,t)}),r.render(n.label,!1),r}return r(e,t),Object.defineProperty(e.prototype,"sClicked",{get:function(){return this._sClicked},enumerable:!0,configurable:!0}),e.prototype.render=function(t,e){this.removeChildren(),this.addChild(i.MenuButton_UI(t,e))},e.prototype.dispose=function(){this.unlisten()},e}(t.r(6).SelfDisposingContainer);n.MenuButton=u},t.f[4]=function(e,n){Object.defineProperty(n,"__esModule",{value:!0});var r=10,o=10,i=t.r(5),u=t.r(37);n.Menu_SetLayout=function(t){var e=i.spreadPosition(o,"width",t);u.zipWith(function(t,e){return t.x=e},t,e)},n.MenuButton_UI=function(t,e){var n=new PIXI.TextStyle({fontFamily:"Arial",fontSize:24,fill:"#ffffff",wordWrap:!1,align:"center"}),o=e?5853748:2763306,i=new PIXI.Graphics,u=new PIXI.Text(t,n);return i.beginFill(o),i.drawRoundedRect(0,0,u.width+2*r,u.height+2*r,10),i.endFill(),i.addChild(u),u.x=r,u.y=r,i}},t.f[5]=function(e,n){Object.defineProperty(n,"__esModule",{value:!0});var r=t.r(37),o=t.r(38);n.spreadPosition=function(t,e,n){var o=r.pluck(e,n);return r.scan(r.add,0,o).map(function(e,n){return e+n*t})},n.CellSequence=function(t){return t.reduce(function(t,e){return t=t.lift(e,function(t,e){return t.concat([e])})},new o.Cell(new Array))}},t.f[6]=function(t,e){var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){var e=t.call(this)||this;return e.once("removed",function(){return e.dispose()}),e}return n(e,t),e}(PIXI.Container);e.SelfDisposingContainer=r},t.f[7]=function(e,n){var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=t.r(8),i=t.r(9),u=function(t){function e(){var e=t.call(this)||this,n=new o.Ticker,r=new i.Ball(n.sTicks);return e.addChild(r),e._dispose=function(){n.dispose(),e.removeChild(r)},e}return r(e,t),e.prototype.dispose=function(){this._dispose()},e}(t.r(6).SelfDisposingContainer);n.Simple=u},t.f[8]=function(e,n){Object.defineProperty(n,"__esModule",{value:!0});var r=t.r(38),o=function(){function t(){var t=this;r.Transaction.run(function(){t.sink=new r.StreamSink,t.unlistener=t.sink.listen(function(t){}),t.ticker=new PIXI.ticker.Ticker,t.ticker.add(function(e){return t.sink.send(e)}),t.start()})}return Object.defineProperty(t.prototype,"sTicks",{get:function(){return this.sink},enumerable:!0,configurable:!0}),t.prototype.start=function(){this.ticker.start()},t.prototype.stop=function(){this.ticker.stop()},t.prototype.dispose=function(){this.stop(),this.unlistener()},t}();n.Ticker=o},t.f[9]=function(e,n){var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=t.r(37),i=t.r(10),u=t.r(1),s=t.r(38),a=10,c=50,l=function(t){function e(e){var n=t.call(this)||this;return n.sTicks=e,n.addChild(i.UI_Ball(c)),n.y=u.CanvasHeight/2,s.Transaction.run(function(){var t=new s.CellLoop,r=e.snapshot(t,function(t,e){return n.getMotion(t,e)});t.loop(r.hold({x:0,v:a})),n.unlistener=t.listen(function(t){return n.x=t.x})}),n}return r(e,t),e.prototype.getMotion=function(t,e){var n=c,r=u.CanvasWidth-c,i=o.clamp(n,r,e.x+t*e.v),s=o.set(o.lensProp("x"),i,e);return s.x!=n&&s.x!=r||(s.v*=-1),s},e.prototype.dispose=function(){this.unlistener()},e}(t.r(6).SelfDisposingContainer);n.Ball=l},t.f[10]=function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.UI_Ball=function(t){var e=new PIXI.Graphics;return e.beginFill(16711680),e.drawCircle(0,0,t),e.endFill(),e}},t.f[11]=function(e,n){var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=t.r(38),i=t.r(6),u=t.r(12),s=t.r(14),a=t.r(2),c=t.r(1),l=function(t){function e(){function e(t,e){void 0!==e&&null!==e&&(t.texture=e)}var n=t.call(this)||this,r={bird:new u.Character(new u.CharacterConfig("bird",4,1)),dinosaur:new u.Character(new u.CharacterConfig("terrex",19,5))},i=Object.keys(r).map(function(t){return r[t]}),l=new Array,f=new s.Assets,p=f.load(i.map(function(t){return t.getPaths()}).reduce(function(t,e){return t.concat(e)}));return l.push(p.listen(function(t){var u=new a.Menu(Object.keys(r).map(function(t){return a.CreateMenuItem(t)}),"bird");u.y=c.CanvasHeight-u.height-100,u.x=(c.CanvasWidth-u.width)/2,n.addChild(u);var s=new PIXI.Sprite;s.anchor.set(.5,.5),s.x=c.CanvasWidth/2,s.y=c.CanvasHeight/2,n.addChild(s),i.forEach(function(t){t.prepAssets(f)}),o.Transaction.run(function(){var t=u.cId.map(function(t){return r[t]});l.push(t.listen(function(t){return s.scale.set(t.config.scale,t.config.scale)}));var n=o.Cell.switchC(t.map(function(t){return t.cTexture}));l.push(n.listen(function(t){return e(s,t)}))})})),n._dispose=function(){l.forEach(function(t){return t()}),f.dispose(),i.forEach(function(t){return t.dispose()})},n}return r(e,t),e.prototype.dispose=function(){this._dispose()},e}(i.SelfDisposingContainer);n.Switch=l},t.f[12]=function(e,n){Object.defineProperty(n,"__esModule",{value:!0});var r=t.r(38),o=t.r(13),i=t.r(37),u=function(){return function(t,e,n){this.baseId=t,this.len=e,this.scale=n}}();n.CharacterConfig=u;var s=function(){function t(t){var e=this;this.config=t,r.Transaction.run(function(){e._cFrame=new r.CellLoop,e._cFrame.listen(function(){}),e.frames=new o.Frames(3);var n=e.frames.sFrames.snapshot(e._cFrame,function(e,n){return n==t.len-1&&(n=0),n+1});e._cFrame.loop(n.hold(1))})}return Object.defineProperty(t.prototype,"cFrame",{get:function(){return this._cFrame},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cTexture",{get:function(){var t=this;return this._cFrame.map(function(e){return t.getTexture(e)})},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this.frames.stop()},t.prototype.prepAssets=function(t){this._textures=this.getPaths().map(function(e){return t.getTexture(e)})},t.prototype.getTexture=function(t){return this._textures[t]},t.prototype.getPaths=function(){var t=this;return i.times(function(e){return t.getPath(e+1)},this.config.len)},t.prototype.getPath=function(t){var e=t<10?"0"+t:t.toString();return this.config.baseId+"/"+this.config.baseId+"_"+e},t}();n.Character=s},t.f[13]=function(e,n){Object.defineProperty(n,"__esModule",{value:!0});var r=t.r(38),o=t.r(8),i=function(){function t(t){var e=this;this.ticker=new o.Ticker,r.Transaction.run(function(){var n=e.ticker.sTicks.accum(0,function(e,n){return(n+=e)>=t?0:n+e}),o=r.Operational.updates(n).filter(function(t){return 0===t}).accum(0,function(t,e){return e+1});e._sFrames=r.Operational.updates(o),e.unlistener=e._sFrames.listen(function(){})})}return Object.defineProperty(t.prototype,"sFrames",{get:function(){return this._sFrames},enumerable:!0,configurable:!0}),t.prototype.start=function(){this.ticker.start()},t.prototype.stop=function(){this.ticker.stop()},t.prototype.dispose=function(){this.stop(),this.unlistener()},t}();n.Frames=i},t.f[14]=function(e,n){Object.defineProperty(n,"__esModule",{value:!0});var r=t.r(15),o=t.r(38),i=function(){function t(){}return t.prototype.load=function(t){var e=new PIXI.loaders.Loader,n=new o.StreamSink;return t.forEach(function(t){return e.add(t,r.Path.GetImagePath(t)+".png")}),e.once("complete",function(){n.send(!0)}),e.load(),this.loader=e,n},t.prototype.getTexture=function(t){return this.loader.resources[t].texture},t.prototype.dispose=function(){var t=this;Object.keys(this.loader.resources).forEach(function(e){return t.loader.resources[e].texture.destroy()}),this.loader.reset()},t}();n.Assets=i},t.f[15]=function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return Object.defineProperty(t,"audioExt",{get:function(){if(void 0===this._audioExt){var t=window.Modernizr;"probably"==t.audio.mp3?this._audioExt=".mp3":"probably"==t.audio.ogg?this._audioExt=".ogg":"probably"==t.audio.m4a||"probably"==t.audio.aac?this._audioExt=".m4a":(this._audioExt=".mp3",console.log("unable to detect any supported audio format, defaulting to "+this._audioExt)),console.log("Audio ext is not set, setting to "+this._audioExt)}return this._audioExt},enumerable:!0,configurable:!0}),Object.defineProperty(t,"videoExt",{get:function(){if(void 0===this._videoExt){var t=window.Modernizr;"probably"==t.video.h264?this._videoExt=".mp4":"probably"==t.video.webm?this._videoExt=".webm":"probably"==t.video.ogg?this._videoExt=".ogv":(this._videoExt=".mp4",console.log("unable to detect any supported video format, defaulting to "+this._videoExt)),console.log("Vidio ext is not set, setting to "+this._videoExt)}return this._videoExt},enumerable:!0,configurable:!0}),t.GetImagePath=function(t){return"static/images/"+t},t.GetAudioPath=function(t){return"static/audio/"+t},t}();e.Path=n},t.f[16]=function(e,n){var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o,i=t.r(8),u=t.r(1),s=t.r(38),a=t.r(6),c=t.r(17),l=t.r(19),f=t.r(18),p=t.r(37);!function(t){t[t.DOWN=0]="DOWN",t[t.UP=1]="UP"}(o||(o={}));var h=function(t){function e(){function e(){m.send(o.DOWN)}function n(){m.send(o.UP)}var r=t.call(this)||this,a=new PIXI.Rectangle(0,0,u.CanvasWidth,u.CanvasHeight),h=new l.UI,d=new PIXI.Container;r.addChild(d),r.addChild(h.status);var y=new i.Ticker,_=new Array,v=new Array,m=new s.CellSink(o.UP),g=h.load(),w=y.sTicks.gate(g),x=w.gate(m.map(function(t){return t==o.DOWN}));return _.push(g.listen(function(){u.Main.app.renderer.plugins.interaction.on("pointerdown",e),u.Main.app.renderer.plugins.interaction.on("pointerup",n)}),w.listen(function(){v.forEach(function(t){t.render(f.UpdateMotion(t.motion,a))})}),x.listen(function(){p.repeat(function(){return new c.Bunny(h.texture)},100).forEach(function(t){var e=t();d.addChild(e),v.push(e)}),h.updateStatus(v.length+" bunnies!")})),r._dispose=function(){u.Main.app.renderer.plugins.interaction.off("pointerdown",e),u.Main.app.renderer.plugins.interaction.off("pointerup",n),_.forEach(function(t){return t()}),y.dispose(),h.dispose()},r}return r(e,t),e.prototype.dispose=function(){this._dispose()},e}(a.SelfDisposingContainer);n.Bunnies=h},t.f[17]=function(e,n){var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=t.r(18),i=function(t){function e(e){var n=t.call(this,e)||this;return n.anchor.x=.5,n.anchor.y=1,n.motion=o.NewMotion(),n}return r(e,t),e.prototype.render=function(t){this.x=t.origin.x,this.y=t.origin.y,this.motion=t},e}(PIXI.Sprite);n.Bunny=i},t.f[18]=function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=.75;e.UpdateMotion=function(t,e){var r={origin:Object.assign({},t.origin),direction:Object.assign({},t.direction)};return r.origin.x+=r.direction.x,r.origin.y+=r.direction.y,r.direction.y+=n,r.origin.x>e.right?(r.direction.x*=-1,r.origin.x=e.right):r.origin.x<e.left&&(r.direction.x*=-1,r.origin.x=e.left),r.origin.y>e.bottom?(r.direction.y*=-.85,r.origin.y=e.bottom,Math.random()>.5&&(r.direction.y-=6*Math.random())):r.origin.y<e.top&&(r.direction.y=0,r.origin.y=e.top),Object.freeze(r)},e.NewMotion=function(){return Object.freeze({origin:{x:0,y:0},direction:{x:10*Math.random(),y:10*Math.random()-5}})}},t.f[19]=function(e,n){Object.defineProperty(n,"__esModule",{value:!0});var r=t.r(15),o=t.r(38),i=t.r(1),u=function(){function t(){this.status=new PIXI.Text}return t.prototype.load=function(){var t=new o.CellSink(!1),e=new PIXI.loaders.Loader;return e.add("bunny",r.Path.GetImagePath("bunny.png")),e.once("complete",function(){t.send(!0)}),e.load(),this.loader=e,t},Object.defineProperty(t.prototype,"texture",{get:function(){return this.loader.resources.bunny.texture},enumerable:!0,configurable:!0}),t.prototype.updateStatus=function(t){this.status.text=t,this.status.x=(i.CanvasWidth-this.status.width)/2},t.prototype.dispose=function(){this.texture.destroy(),this.loader.reset()},t}();n.UI=u},t.f[20]=function(e,n){var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=t.r(38),i=t.r(6),u=t.r(1),s=t.r(21),a=t.r(27),c=t.r(28),l=t.r(23),f=t.r(24),p=function(t){function e(){var e=t.call(this)||this,n=new Array,r=new c.Assets;return n.push(r.load(l.sampleIds).listen(function(t){var r=l.sampleIds.reduce(function(e,n){return e[n]=t[n].sound,e},{}),i=Object.keys(r).map(function(t){return r[t]}),c=new s.Samplers(l.sampleIds);c.x=(u.CanvasWidth-c.width)/2,c.y=(u.CanvasHeight-c.height)/2-100,e.addChild(c);var p=new a.Timer;p.x=c.x,p.y=c.y+c.height+30,e.addChild(p);var h=new f.Slider(l.VolumeSliderOptions(p.y+p.height-c.y));h.x=c.x+c.width+40,h.y=c.y,e.addChild(h);var d=new f.Slider(l.SpeedSliderOptions(c.width));d.x=c.x,d.y=p.y+p.height+40,e.addChild(d),o.Transaction.run(function(){p.start(d.cPerc),n.push(h.cPerc.listen(function(t){i.forEach(function(e){return e.volume=t})}),c.getSamples(p.cMeasure).listen(function(t){t.forEach(function(t){r[t].play()})}))})})),e._dispose=function(){n.forEach(function(t){return t()}),r.dispose(),window.PIXI.sound.removeAll()},e}return r(e,t),e.prototype.dispose=function(){this._dispose()},e}(i.SelfDisposingContainer);n.DrumMachine=p},t.f[21]=function(e,n){var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=t.r(6),i=t.r(22),u=t.r(38),s=t.r(5),a=t.r(23),c=t.r(37),l=function(){function t(t,e){var n=this;t.interactive=t.buttonMode=!0,u.Transaction.run(function(){var r=new u.CellLoop,o=new u.StreamSink,i=o.snapshot(r,function(t,e){return!e});r.loop(i.hold(e)),t.on("pointerdown",function(t){return o.send(t)}),n.dispose=r.listen(function(e){return t.redraw(e)}),n._cActive=r})}return Object.defineProperty(t.prototype,"cActive",{get:function(){return this._cActive},enumerable:!0,configurable:!0}),t}(),f=function(t){function e(e,n){var r=t.call(this)||this;r.sampleId=e;var o=new i.Row_UI(255,2763306);return r.addChild(o),r.blocks=o.children.map(function(t,e){return new l(t,-1!==n.indexOf(e))}),r}return r(e,t),e}(PIXI.Container),p=function(t){function e(e){var n=t.call(this)||this;return n.rows=n.makeRows(e),n.rows.forEach(function(t){return n.addChild(t)}),n}return r(e,t),e.prototype.getSamples=function(t){var e=this;return u.Cell.switchC(t.map(function(t){return s.CellSequence(e.rows.map(function(e){return e.blocks[t].cActive.map(function(t){return t?e.sampleId:""})}))})).map(function(t){return t.filter(function(t){return""!==t})})},e.prototype.makeRows=function(t){var e=t.map(function(t,e){return new f(t,a.RowConfig(e))}),n=s.spreadPosition(10,"height",e);return c.zipWith(function(t,e){return t.y=e},e,n),e},e.prototype.dispose=function(){this.rows.forEach(function(t){return t.blocks.forEach(function(t){return t.dispose()})})},e}(o.SelfDisposingContainer);n.Samplers=p},t.f[22]=function(e,n){var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=t.r(5),i=t.r(37),u=function(t){function e(e,n){var r=t.call(this)||this,u=i.repeat(function(){return new s(e,n)},16).map(function(t){return t()}),a=o.spreadPosition(10,"width",u);return i.zipWith(function(t,e){return t.x=e},u,a),u.forEach(function(t){return r.addChild(t)}),r}return r(e,t),e}(PIXI.Container);n.Row_UI=u;var s=function(t){function e(e,n){var r=t.call(this)||this;return r.onColor=e,r.offColor=n,r.beginFill(16777215,1),r.drawRoundedRect(0,0,50,50,10),r.endFill(),r}return r(e,t),e.prototype.redraw=function(t){this.tint=t?this.onColor:this.offColor},e}(PIXI.Graphics)},t.f[23]=function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.sampleIds=["bass","snare","cymbal","hihat"];var r=t.r(24);n.RowConfig=function(t){switch(t){case 0:return[0,10];case 1:return[4,12];case 2:return[];case 3:return[2,7,9,12]}return[]},n.VolumeSliderOptions=function(t){return{initPerc:.7,dir:r.Direction.VERTICAL,knob:{radius:25,color:16711680},track:{sizeX:50,sizeY:t,color:65280}}},n.SpeedSliderOptions=function(t){return{initPerc:.5,dir:r.Direction.HORIZONTAL,knob:{radius:25,color:16711680},track:{sizeX:t,sizeY:50,color:65280}}}},t.f[24]=function(e,n){var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o,i=t.r(38),u=t.r(25),s=t.r(26),a=t.r(37);!function(t){t[t.HORIZONTAL=0]="HORIZONTAL",t[t.VERTICAL=1]="VERTICAL"}(o=n.Direction||(n.Direction={}));var c=function(t){function e(e){function n(t){var n=a.clamp(0,1),r=(t-l)/(f-l);return n(e.dir===o.VERTICAL?1-r:r)}function r(t){return a.clamp(l,f)((e.dir===o.VERTICAL?1-t:t)*(f-l)+l)}var c=t.call(this)||this;c.opts=e;var l=e.knob.radius,f=e.dir===o.HORIZONTAL?e.track.sizeX-e.knob.radius:e.track.sizeY-e.knob.radius,p=new PIXI.Graphics;p.beginFill(e.track.color),p.drawRect(0,0,e.track.sizeX,e.track.sizeY),p.endFill(),c.addChild(p);var h=new PIXI.Graphics;return h.beginFill(e.knob.color),h.drawCircle(0,0,e.knob.radius),h.endFill(),c._knob=h,c.addChild(h),h.x=e.dir===o.HORIZONTAL?r(e.initPerc):e.track.sizeX/2,h.y=e.dir===o.VERTICAL?r(e.initPerc):e.track.sizeY/2,i.Transaction.run(function(){var t=new u.Draggable(h,{validator:e.dir===o.HORIZONTAL?s.HorizontalValidator(l,f):s.VerticalValidator(l,f),axisLock:e.dir===o.HORIZONTAL?u.DraggableAxisLock.Y:u.DraggableAxisLock.X});c.sPerc=t.sEvent.filter(function(t){return t.type===u.DraggableEventType.MOVE}).map(function(t){return n(e.dir===o.HORIZONTAL?t.point.x:t.point.y)}),c.cPerc=c.sPerc.hold(e.initPerc)}),c}return r(e,t),e}(PIXI.Container);n.Slider=c},t.f[25]=function(e,n){var r=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t};Object.defineProperty(n,"__esModule",{value:!0});var o,i=t.r(38),u=t.r(1),s=2,a=250;!function(t){t[t.X=0]="X",t[t.Y=1]="Y",t[t.BOTH=2]="BOTH"}(o=n.DraggableAxisLock||(n.DraggableAxisLock={}));var c;!function(t){t[t.START=0]="START",t[t.MOVE=1]="MOVE",t[t.END=2]="END"}(c=n.DraggableEventType||(n.DraggableEventType={}));var l;!function(t){t[t.TAP=0]="TAP"}(l=n.DraggableGesture||(n.DraggableGesture={}));var f=function(){function t(t,e){var n=this;this.displayTarget=t,i.Transaction.run(function(){function f(t){t?(u.Main.app.renderer.plugins.interaction.on("pointermove",C),u.Main.app.renderer.plugins.interaction.on("pointerup",O),u.Main.app.renderer.plugins.interaction.on("pointeroutside",O)):(u.Main.app.renderer.plugins.interaction.off("pointermove",C),u.Main.app.renderer.plugins.interaction.off("pointerup",O),u.Main.app.renderer.plugins.interaction.off("pointeroutside",O))}function p(e,n){return n.map(function(n){return Object.freeze({type:e,displayTarget:t,point:h(n,t.parent),localPoint:h(n,t),timestamp:Date.now(),pixiEvent:n})})}function h(t,e){return t.data.getLocalPosition(e,void 0,t.data.global)}function d(t){return t.gate(e.cEnabled).gate(w.map(function(t){return null!==t}).hold(!1))}function y(n,r){var i=n.x-r.x*t.scale.x,u=n.y-r.y*t.scale.y;return void 0===e.axisLock||e.axisLock!==o.X&&e.axisLock!==o.BOTH||(i=t.x),void 0===e.axisLock||e.axisLock!==o.Y&&e.axisLock!==o.BOTH||(u=t.y),new PIXI.Point(i,u)}function _(t,e){return function(){var n=Math.abs(t.point.x-e.point.x),r=Math.abs(t.point.y-e.point.y);return e.timestamp-t.timestamp<a&&n<s&&r<s}()?l.TAP:void 0}function v(t,e){return Object.freeze(Object.assign(r({},t),{gesture:e}))}function m(t,e){return Object.freeze(Object.assign(r({},t),{point:e}))}function g(t){return void 0===t?g({}):(void 0===t.cEnabled&&(t.cEnabled=new i.Cell(!0)),void 0===t.makeInteractive&&(t.makeInteractive=!0),void 0===t.validator&&(t.validator=function(){return!0}),t)}(e=g(e)).makeInteractive&&(t.interactive=t.buttonMode=!0);var w=new i.StreamSink,x=new i.StreamSink,b=new i.StreamSink,S=function(t){return w.send(t)},C=function(t){return x.send(t)},O=function(t){b.send(t),w.send(null)};t.on("pointerdown",S);var T=p(c.START,w.gate(e.cEnabled).filterNotNull()),P=p(c.MOVE,d(x)).snapshot(T.hold(null),function(t,e){return m(t,y(t.point,e.localPoint))}).filter(function(t){return e.validator(t)}),k=p(c.END,d(b)).snapshot(T.hold(null),function(t,e){return v(t,_(e,t))});n.sEvent=T.orElse(P).orElse(k);var E=new Array;E.push(T.listen(function(){return f(!0)}),k.listen(function(){return f(!1)}),P.listen(function(e){return t.position.set(e.point.x,e.point.y)})),n._dispose=function(){E.forEach(function(t){return t()}),t.off("pointerdown",S),f(!1)}})}return t.prototype.dispose=function(){this._dispose()},t}();n.Draggable=f},t.f[26]=function(t,e){function n(t,e){return function(n){return n.point.x>=t&&n.point.x<=e}}function r(t,e){return function(n){return n.point.y>=t&&n.point.y<=e}}Object.defineProperty(e,"__esModule",{value:!0}),e.HorizontalValidator=n,e.VerticalValidator=r},t.f[27]=function(e,n){var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=t.r(6),i=t.r(22),u=t.r(38),s=t.r(37),a=function(t){function e(){var e=t.call(this)||this;return e._row=new i.Row_UI(16711680,13421772),e.addChild(e._row),e}return r(e,t),e.prototype.start=function(t){var e=this,n=function(t){return s.clamp(20,1e3,1e3*Math.exp(-5*t))},r=new u.MillisecondsTimerSystem,o=r.time,i=new u.CellLoop,a=r.at(i).snapshot3(i,t,function(t,e,r){return e+n(r)});i.loop(a.hold(o.sample()+n(t.sample())));var c=new u.CellLoop;c.loop(a.snapshot(c,function(t,e){return e<15?e+1:0}).hold(0)),this._cMeasure=c,this.unlisten=this._cMeasure.listen(function(t){e._row.children.forEach(function(e,n){return e.redraw(t===n)})})},Object.defineProperty(e.prototype,"cMeasure",{get:function(){return this._cMeasure},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this.unlisten()},e}(o.SelfDisposingContainer);n.Timer=a},t.f[28]=function(e,n){Object.defineProperty(n,"__esModule",{value:!0});var r=t.r(15),o=t.r(38),i=function(){function t(){}return t.prototype.load=function(t){var e=this,n=new PIXI.loaders.Loader,i=new o.StreamSink;return t.forEach(function(t){return n.add(t,r.Path.GetAudioPath(t+".wav"))}),n.once("complete",function(){i.send(e.loader.resources)}),n.load(),this.loader=n,i},t.prototype.dispose=function(){this.loader.reset()},t}();n.Assets=i},t.f[29]=function(e,n){var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=t.r(38),i=t.r(6),u=t.r(30),s=t.r(31),a=t.r(32),c=t.r(33),l=t.r(1),f=function(t){function e(){var e=t.call(this)||this,n=new Array,r=new u.Assets,i=r.load();return n.push(i.listen(function(t){o.Transaction.run(function(){var t=new c.Brush(r.getTexture()),o=new s.CanvasRender(t,new PIXI.Rectangle(0,0,l.CanvasWidth,l.CanvasHeight)),i=new a.CanvasTouch(o);e.addChild(o),n.push(i.sStart.listen(function(t){return o.drawBegin(t)}),i.sMove.listen(function(t){return o.drawUpdate(t.p1,t.p2)}),i.sEnd.listen(function(t){return o.drawEnd(t)})),e._dispose=function(){n.forEach(function(t){return t()}),i.dispose()}})})),e}return r(e,t),e.prototype.dispose=function(){this._dispose()},e}(i.SelfDisposingContainer);n.Draw=f},t.f[30]=function(e,n){Object.defineProperty(n,"__esModule",{value:!0});var r=t.r(15),o=t.r(38),i=function(){function t(){}return t.prototype.load=function(){var t=new PIXI.loaders.Loader,e=new o.StreamSink;return t.add("brush",r.Path.GetImagePath("brush.png")),t.once("complete",function(){e.send(!0)}),t.load(),this.loader=t,e},t.prototype.getTexture=function(){return this.loader.resources.brush.texture},t.prototype.dispose=function(){this.getTexture().destroy(),this.loader.reset()},t}();n.Assets=i},t.f[31]=function(e,n){var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=t.r(1),i=function(t){function e(e,n){var r=t.call(this,PIXI.RenderTexture.create(n.width,n.height))||this;return r.brush=e,r.interactive=!0,r.renderTexture=r.texture,r.drawBuffer=new PIXI.Sprite,r}return r(e,t),e.prototype.drawBegin=function(t){this.brush.changeColor()},e.prototype.drawEnd=function(t){},e.prototype.drawUpdate=function(t,e){var n=this,r=this.getLine(t.x,t.y,e.x,e.y);if(0!=r.length){var i=this.brush.getSprites(r.length);i.forEach(function(t,e){var o=r[e];t.position.set(o.x,o.y),n.drawBuffer.addChild(t)}),o.Main.app.renderer.render(this.drawBuffer,this.renderTexture,!1),this.brush.returnToPool(i),this.drawBuffer.removeChildren()}else console.error("THIS SHOULD NEVER HAPPEN")},e.prototype.getLine=function(t,e,n,r){var o,i=new Array,u=new PIXI.Point,s=new PIXI.Point;if(t==n&&e==r)return i;if(u.x=n-t,u.y=r-e,s.x=u.x>0?1:-1,s.y=u.y>0?1:-1,u.x=Math.abs(u.x),u.y=Math.abs(u.y),u.x>=u.y)for(u.y<<=1,o=u.y-u.x,u.x<<=1;t!=n;)i.push({x:t,y:e}),o>=0&&(e+=s.y,o-=u.x),o+=u.y,t+=s.x;else for(u.x<<=1,o=u.x-u.y,u.y<<=1;e!=r;)i.push({x:t,y:e}),o>=0&&(t+=s.x,o-=u.y),o+=u.x,e+=s.y;return i.push({x:t,y:e}),i},e}(PIXI.Sprite);n.CanvasRender=i},t.f[32]=function(e,n){Object.defineProperty(n,"__esModule",{value:!0});var r=t.r(38),o=t.r(1),i=function(){function t(t){function e(t){t?(o.Main.app.renderer.plugins.interaction.on("pointermove",c),o.Main.app.renderer.plugins.interaction.on("pointerup",l),o.Main.app.renderer.plugins.interaction.on("pointeroutside",l)):(o.Main.app.renderer.plugins.interaction.off("pointermove",c),o.Main.app.renderer.plugins.interaction.off("pointerup",l),o.Main.app.renderer.plugins.interaction.off("pointeroutside",l))}function n(e,n){return e.snapshot(f,function(t,e){return e||!n?t:null}).filterNotNull().map(function(e){return e.data.getLocalPosition(t,void 0,e.data.global)}).map(function(t){return new PIXI.Point(t.x>>0,t.y>>0)})}this.target=t;var i=new r.StreamSink,u=new r.StreamSink,s=new r.StreamSink,a=function(t){return i.send(t)},c=function(t){return u.send(t)},l=function(t){s.send(t),i.send(null)};t.on("pointerdown",a);var f=i.map(function(t){return null!==t}).hold(!1);this.sStart=n(i,!1),this.sEnd=n(s,!0),this.sMove=this.sStart.map(function(t){return null}).orElse(n(u,!0)).collect(null,function(t,e){return new r.Tuple2(null===e||null===t||e.equals(t)?null:Object.freeze({p1:e,p2:t}),t)}).filterNotNull();var p=new Array;p.push(this.sStart.listen(function(){return e(!0)}),this.sEnd.listen(function(){return e(!1)})),this._dispose=function(){p.forEach(function(t){return t()}),t.off("pointerdown",a),e(!1)}}return t.prototype.dispose=function(){this._dispose()},t}();n.CanvasTouch=i},t.f[33]=function(e,n){Object.defineProperty(n,"__esModule",{value:!0});var r=t.r(37),o=function(){function t(t){this.texture=t,this.pool=new Array,this.changeColor(),this.getSprites(100)}return t.prototype.changeColor=function(){var t=this;this._color=3435973836*Math.random(),this.pool.forEach(function(e){e.tint=t._color})},t.prototype.returnToPool=function(t){this.pool=this.pool.concat(t)},t.prototype.getSprites=function(t){var e=this;if(this.pool.length<t){var n=t-this.pool.length;r.repeat(function(){return new PIXI.Sprite(e.texture)},n).forEach(function(t){var n=t();n.anchor.set(.5,.5),n.tint=e._color,e.pool.push(n)})}return this.pool.splice(0,t)},t}();n.Brush=o},t.f[34]=function(e,n){var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=t.r(38),i=t.r(6),u=t.r(25),s=t.r(35),a=function(t){function e(){var e=t.call(this)||this,n=new Array,r=s.CreateShapes();r.forEach(function(t){return e.addChild(t)});var i=r.map(function(t){return new u.Draggable(t)}),a=i.map(function(t){return t.sEvent}).reduce(function(t,e){return t.orElse(e)});return o.Transaction.run(function(){n.push(a.filter(function(t){return t.type===u.DraggableEventType.START}).listen(function(t){t.displayTarget.selected=!0}),a.filter(function(t){return t.type===u.DraggableEventType.END}).listen(function(t){t.displayTarget.selected=!1}),a.filter(function(t){return t.gesture===u.DraggableGesture.TAP}).listen(function(t){alert(t.displayTarget.opts.type+" was tapped!")}))}),e._dispose=function(){n.forEach(function(t){return t()}),i.forEach(function(t){return t.dispose()})},e}return r(e,t),e.prototype.dispose=function(){this._dispose()},e}(i.SelfDisposingContainer);n.Move=a},t.f[35]=function(t,e){var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e){var n=t.call(this)||this;return n.opts=e,n._selected=!1,n.redraw(),n.x=e.initX,n.y=e.initY,n}return n(e,t),Object.defineProperty(e.prototype,"selected",{set:function(t){this._selected=t,this.redraw()},enumerable:!0,configurable:!0}),e.prototype.redraw=function(){switch(this.clear(),this.beginFill(this.opts.fillColor,this._selected?1:0),this.lineStyle(2,this.opts.borderColor),this.opts.type){case"circle":this.drawCircle(0,0,50);break;case"square":this.drawRoundedRect(-50,-50,100,100,10);break;case"triangle":this.drawPolygon([-50,-50,-50,50,50,50,-50,-50])}this.endFill()},e}(PIXI.Graphics);e.CreateShapes=function(){return[new r({type:"circle",fillColor:16711680,borderColor:0,initX:300,initY:300}),new r({type:"square",fillColor:65280,borderColor:0,initX:600,initY:300}),new r({type:"triangle",fillColor:255,borderColor:0,initX:900,initY:300})]}},t.f[36]=function(e,n){var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=t.r(1),i=function(t){function e(){var e=t.call(this)||this,n=new PIXI.ticker.Ticker,r=Date.now();return n.add(function(){var t=Math.round(n.FPS),i=Math.floor((Date.now()-r)/1e3);e.text=t.toString()+" FPS "+i+" secs",e.x=o.CanvasWidth-e.width-20}),n.start(),e.on("removed",function(){return n.stop()}),e}return r(e,t),e}(PIXI.Text);n.FPS=i},t.f[37]=function(t,e){t.exports=R},t.f[38]=function(t,e){"object"==typeof global&&(global.require=require);var n={};n.f={},n.m={},n.r=function(t){var e=n.m[t];if(e)return e.m.exports;var r=n.f[t];return r?(e=n.m[t]={},e.exports={},e.m={exports:e.exports},r(e.m,e.exports),e.m.exports):void 0},n.f[0]=function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r=n.r(1);e.lambda1=r.lambda1,e.lambda2=r.lambda2,e.lambda3=r.lambda3,e.lambda4=r.lambda4,e.lambda5=r.lambda5,e.lambda6=r.lambda6;var o=n.r(3);e.Stream=o.Stream,e.StreamLoop=o.StreamLoop;var i=n.r(12);e.StreamSink=i.StreamSink;var u=n.r(6);e.Cell=u.Cell;var s=n.r(13);e.CellLoop=s.CellLoop;var a=n.r(14);e.CellSink=a.CellSink;var c=n.r(4);e.Transaction=c.Transaction;var l=n.r(15);e.Tuple2=l.Tuple2;var f=n.r(9);e.Unit=f.Unit;var p=n.r(8);e.Operational=p.Operational;var h=n.r(2);e.getTotalRegistrations=h.getTotalRegistrations,e.Vertex=h.Vertex;var d=n.r(16);e.TimerSystemImpl=d.TimerSystemImpl,e.TimerSystem=d.TimerSystem;var y=n.r(17);e.SecondsTimerSystem=y.SecondsTimerSystem;var _=n.r(18);e.MillisecondsTimerSystem=_.MillisecondsTimerSystem;var v=n.r(19);e.IOAction=v.IOAction},n.f[1]=function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r=n.r(2),o=function(t,e){this.f=t,this.deps=e};e.lambda1=function(t,e){return new o(t,e)},e.Lambda1_deps=function(t){return t instanceof o?t.deps:[]},e.Lambda1_toFunction=function(t){return t instanceof o?t.f:t};var i=function(t,e){this.f=t,this.deps=e};e.lambda2=function(t,e){return new i(t,e)},e.Lambda2_deps=function(t){return t instanceof i?t.deps:[]},e.Lambda2_toFunction=function(t){return t instanceof i?t.f:t};var u=function(t,e){this.f=t,this.deps=e};e.lambda3=function(t,e){return new u(t,e)},e.Lambda3_deps=function(t){return t instanceof u?t.deps:[]},e.Lambda3_toFunction=function(t){return t instanceof u?t.f:t};var s=function(t,e){this.f=t,this.deps=e};e.lambda4=function(t,e){return new s(t,e)},e.Lambda4_deps=function(t){return t instanceof s?t.deps:[]},e.Lambda4_toFunction=function(t){return t instanceof s?t.f:t};var a=function(t,e){this.f=t,this.deps=e};e.lambda5=function(t,e){return new a(t,e)},e.Lambda5_deps=function(t){return t instanceof a?t.deps:[]},e.Lambda5_toFunction=function(t){return t instanceof a?t.f:t};var c=function(t,e){this.f=t,this.deps=e};e.lambda6=function(t,e){return new c(t,e)},e.Lambda6_deps=function(t){return t instanceof c?t.deps:[]},e.Lambda6_toFunction=function(t){return t instanceof c?t.f:t},e.toSources=function(t){for(var e=[],n=0;n<t.length;n++){var o=t[n];e.push(new r.Source(o.getVertex__(),null))}return e}},n.f[2]=function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=0;e.getTotalRegistrations=function(){return n};var r=function(){function t(t,e){if(this.registered=!1,this.deregister_=null,null===t)throw new Error("null origin!");this.origin=t,this.register_=e}return t.prototype.register=function(t){var e=this;this.registered||(this.registered=!0,null!==this.register_?this.deregister_=this.register_():(this.origin.increment(t),this.deregister_=function(){return e.origin.decrement(t)}))},t.prototype.deregister=function(t){this.registered&&(this.registered=!1,null!==this.deregister_&&this.deregister_())},t}();e.Source=r;var o;!function(t){t[t.black=0]="black",t[t.gray=1]="gray",t[t.white=2]="white",t[t.purple=3]="purple"}(o=e.Color||(e.Color={}));var i=[],u=0,s=function(){function t(t,e,n){this.targets=[],this.childrn=[],this.visited=!1,this.color=o.black,this.buffered=!1,this.refCountAdj=0,this.name=t,this.rank=e,this.sources=n,this.id=u++}return t.prototype.refCount=function(){return this.targets.length},t.prototype.register=function(t){return this.increment(t)},t.prototype.deregister=function(e){this.decrement(e),t.collectCycles()},t.prototype.incRefCount=function(t){var e=!1;if(0==this.refCount())for(var r=0;r<this.sources.length;r++)this.sources[r].register(this);return this.targets.push(t),t.childrn.push(this),t.ensureBiggerThan(this.rank)&&(e=!0),n++,e},t.prototype.decRefCount=function(t){for(var e=!1,r=0;r<t.childrn.length;r++)t.childrn[r]===this&&t.childrn.splice(r,1);for(r=0;r<this.targets.length;r++)if(this.targets[r]===t){this.targets.splice(r,1),e=!0;break}if(e){if(0==this.refCount())for(r=0;r<this.sources.length;r++)this.sources[r].deregister(this);n--}},t.prototype.addSource=function(t){this.sources.push(t),this.refCount()>0&&t.register(this)},t.prototype.ensureBiggerThan=function(t){if(this.rank>t||this.visited)return!1;this.visited=!0,this.rank=t+1;for(var e=0;e<this.targets.length;e++)this.targets[e].ensureBiggerThan(this.rank);return this.visited=!1,!0},t.prototype.descr=function(){var t=null;switch(this.color){case o.black:t="black";break;case o.gray:t="gray";break;case o.white:t="white";break;case o.purple:t="purple"}for(var e=this.id+" "+this.name+" ["+this.refCount()+"/"+this.refCountAdj+"] "+t+" ->",n=this.children(),r=0;r<n.length;r++)e=e+" "+n[r].id;return e},t.prototype.children=function(){return this.childrn},t.prototype.increment=function(t){return this.incRefCount(t)},t.prototype.decrement=function(t){this.decRefCount(t),0==this.refCount()?this.release():this.possibleRoots()},t.prototype.release=function(){this.color=o.black,this.buffered||this.free()},t.prototype.free=function(){for(;this.targets.length>0;)this.decRefCount(this.targets[0])},t.prototype.possibleRoots=function(){this.color!=o.purple&&(this.color=o.purple,this.buffered||(this.buffered=!0,i.push(this)))},t.collectCycles=function(){t.markRoots(),t.scanRoots(),t.collectRoots()},t.markRoots=function(){for(var t=[],e=0;e<i.length;e++)i[e].color==o.purple?(i[e].markGray(),t.push(i[e])):(i[e].buffered=!1,i[e].color==o.black&&0==i[e].refCount()&&i[e].free());i=t},t.scanRoots=function(){for(var t=0;t<i.length;t++)i[t].scan()},t.collectRoots=function(){for(var t=0;t<i.length;t++)i[t].buffered=!1,i[t].collectWhite();i=[]},t.prototype.markGray=function(){if(this.color!=o.gray){this.color=o.gray;for(var t=this.children(),e=0;e<t.length;e++)t[e].refCountAdj--,t[e].markGray()}},t.prototype.scan=function(){if(this.color==o.gray)if(this.refCount()+this.refCountAdj>0)this.scanBlack();else{this.color=o.white;for(var t=this.children(),e=0;e<t.length;e++)t[e].scan()}},t.prototype.scanBlack=function(){this.color=o.black;for(var t=this.children(),e=0;e<t.length;e++)t[e].refCountAdj++,t[e].color!=o.black&&t[e].scanBlack()},t.prototype.collectWhite=function(){if(this.color==o.white&&!this.buffered){this.color=o.black,this.refCountAdj=0;for(var t=this.children(),e=0;e<t.length;e++)t[e].collectWhite();this.free()}},t.NULL=new t("user",1e12,[]),t}();e.Vertex=s},n.f[3]=function(t,e){var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n.r(1),i=n.r(2),u=n.r(4),s=n.r(5),a=n.r(6),c=n.r(10),l=n.r(7),f=n.r(11),p=function(){function t(t){this.listeners=[],this.firings=[],this.vertex=t||new i.Vertex("Stream",0,[])}return t.prototype.getVertex__=function(){return this.vertex},t.prototype.map=function(t){var e=this,n=new h(null),r=o.Lambda1_toFunction(t);return n.vertex=new i.Vertex("map",0,[new i.Source(this.vertex,function(){return e.listen_(n.vertex,function(t){n.send_(r(t))},!1)})].concat(o.toSources(o.Lambda1_deps(t)))),n},t.prototype.mapTo=function(t){var e=this,n=new h(null);return n.vertex=new i.Vertex("mapTo",0,[new i.Source(this.vertex,function(){return e.listen_(n.vertex,function(e){n.send_(t)},!1)})]),n},t.prototype.orElse=function(t){return this.merge(t,function(t,e){return t})},t.prototype.merge_=function(t){var e=this,n=new h,r=new i.Vertex("merge",0,[]);return r.sources.push(new i.Source(this.vertex,function(){return e.listen_(r,function(t){n.send_(t)},!1)})),n.vertex.sources=n.vertex.sources.concat([new i.Source(r,function(){return r.register(n.vertex),function(){r.deregister(n.vertex)}}),new i.Source(t.vertex,function(){return t.listen_(n.vertex,function(t){n.send_(t)},!1)})]),n},t.prototype.coalesce__=function(t){var e=this,n=new h,r=new s.CoalesceHandler(t,n);return n.vertex.sources=n.vertex.sources.concat([new i.Source(this.vertex,function(){return e.listen_(n.vertex,function(t){r.send_(t)},!1)})]).concat(o.toSources(o.Lambda2_deps(t))),n},t.prototype.merge=function(t,e){var n=this;return u.Transaction.run(function(){return n.merge_(t).coalesce__(e)})},t.prototype.filter=function(t){var e=this,n=new h(null),r=o.Lambda1_toFunction(t);return n.vertex=new i.Vertex("filter",0,[new i.Source(this.vertex,function(){return e.listen_(n.vertex,function(t){r(t)&&n.send_(t)},!1)})].concat(o.toSources(o.Lambda1_deps(t)))),n},t.prototype.filterNotNull=function(){var t=this,e=new h(null);return e.vertex=new i.Vertex("filterNotNull",0,[new i.Source(this.vertex,function(){return t.listen_(e.vertex,function(t){null!==t&&e.send_(t)},!1)})]),e},t.prototype.gate=function(t){return this.snapshot(t,function(t,e){return e?t:null}).filterNotNull()},t.prototype.snapshot1=function(t){var e=this,n=new h(null);return n.vertex=new i.Vertex("snapshot1",0,[new i.Source(this.vertex,function(){return e.listen_(n.vertex,function(e){n.send_(t.sampleNoTrans__())},!1)}),new i.Source(t.getVertex__(),null)]),n},t.prototype.snapshot=function(t,e){var n=this,r=new h(null),u=o.Lambda2_toFunction(e);return r.vertex=new i.Vertex("snapshot",0,[new i.Source(this.vertex,function(){return n.listen_(r.vertex,function(e){r.send_(u(e,t.sampleNoTrans__()))},!1)}),new i.Source(t.getVertex__(),null)].concat(o.toSources(o.Lambda2_deps(e)))),r},t.prototype.snapshot3=function(t,e,n){var r=this,u=new h(null),s=o.Lambda3_toFunction(n);return u.vertex=new i.Vertex("snapshot",0,[new i.Source(this.vertex,function(){return r.listen_(u.vertex,function(n){u.send_(s(n,t.sampleNoTrans__(),e.sampleNoTrans__()))},!1)}),new i.Source(t.getVertex__(),null),new i.Source(e.getVertex__(),null)].concat(o.toSources(o.Lambda3_deps(n)))),u},t.prototype.snapshot4=function(t,e,n,r){var u=this,s=new h(null),a=o.Lambda4_toFunction(r);return s.vertex=new i.Vertex("snapshot",0,[new i.Source(this.vertex,function(){return u.listen_(s.vertex,function(r){s.send_(a(r,t.sampleNoTrans__(),e.sampleNoTrans__(),n.sampleNoTrans__()))},!1)}),new i.Source(t.getVertex__(),null),new i.Source(e.getVertex__(),null),new i.Source(n.getVertex__(),null)].concat(o.toSources(o.Lambda4_deps(r)))),s},t.prototype.snapshot5=function(t,e,n,r,u){var s=this,a=new h(null),c=o.Lambda5_toFunction(u);return a.vertex=new i.Vertex("snapshot",0,[new i.Source(this.vertex,function(){return s.listen_(a.vertex,function(o){a.send_(c(o,t.sampleNoTrans__(),e.sampleNoTrans__(),n.sampleNoTrans__(),r.sampleNoTrans__()))},!1)}),new i.Source(t.getVertex__(),null),new i.Source(e.getVertex__(),null),new i.Source(n.getVertex__(),null),new i.Source(r.getVertex__(),null)].concat(o.toSources(o.Lambda5_deps(u)))),a},t.prototype.snapshot6=function(t,e,n,r,u,s){var a=this,c=new h(null),l=o.Lambda6_toFunction(s);return c.vertex=new i.Vertex("snapshot",0,[new i.Source(this.vertex,function(){return a.listen_(c.vertex,function(o){c.send_(l(o,t.sampleNoTrans__(),e.sampleNoTrans__(),n.sampleNoTrans__(),r.sampleNoTrans__(),u.sampleNoTrans__()))},!1)}),new i.Source(t.getVertex__(),null),new i.Source(e.getVertex__(),null),new i.Source(n.getVertex__(),null),new i.Source(r.getVertex__(),null),new i.Source(u.getVertex__(),null)].concat(o.toSources(o.Lambda6_deps(s)))),c},t.prototype.hold=function(t){return new a.Cell(t,this)},t.prototype.holdLazy=function(t){return new f.LazyCell(t,this)},t.prototype.collect=function(t,e){return this.collectLazy(new l.Lazy(function(){return t}),e)},t.prototype.collectLazy=function(t,e){var n=this;return u.Transaction.run(function(){var r=new d,o=r.holdLazy(t),i=n.snapshot(o,e),u=i.map(function(t){return t.a}),s=i.map(function(t){return t.b});return r.loop(s),u})},t.prototype.accum=function(t,e){return this.accumLazy(new l.Lazy(function(){return t}),e)},t.prototype.accumLazy=function(t,e){var n=this;return u.Transaction.run(function(){var r=new d,o=r.holdLazy(t),i=n.snapshot(o,e);return r.loop(i),i.holdLazy(t)})},t.prototype.once=function(){var t=this;return u.Transaction.run(function(){return t.gate(t.mapTo(!1).hold(!0))})},t.prototype.listen=function(t){var e=this;return u.Transaction.run(function(){return e.listen_(i.Vertex.NULL,t,!1)})},t.prototype.listen_=function(t,e,n){var r=this;this.vertex.register(t)&&u.Transaction.currentTransaction.requestRegen();var o=new c.Listener(e,t);if(this.listeners.push(o),!n&&0!=this.firings.length){var i=this.firings.slice();u.Transaction.currentTransaction.prioritized(t,function(){for(var t=0;t<i.length;t++)e(i[t])})}return function(){for(var e=!1,n=0;n<r.listeners.length;n++)if(r.listeners[n]==o){r.listeners.splice(n,1),e=!0;break}e&&r.vertex.deregister(t)}},t.prototype["fantasy-land/map"]=function(t){return this.map(t)},t.prototype["fantasy-land/concat"]=function(t){return this.orElse(t)},t.prototype["fantasy-land/empty"]=function(){return new t},t}();e.Stream=p;var h=function(t){function e(e){return t.call(this,e)||this}return r(e,t),e.prototype.setVertex__=function(t){this.vertex=t},e.prototype.send_=function(t){var e=this;if(0==this.vertex.refCount())throw new Error("send() was invoked before listeners were registered");0==this.firings.length&&u.Transaction.currentTransaction.last(function(){e.firings=[]}),this.firings.push(t);for(var n=this.listeners.slice(),r=0;r<n.length;r++)!function(e){var r=n[e].h;u.Transaction.currentTransaction.prioritized(n[e].target,function(){u.Transaction.currentTransaction.inCallback++;try{r(t),u.Transaction.currentTransaction.inCallback--}catch(t){throw u.Transaction.currentTransaction.inCallback--,t}})}(r)},e}(p);e.StreamWithSend=h;var d=function(t){function e(){var e=t.call(this)||this;if(e.assigned__=!1,e.vertex.name="StreamLoop",null===u.Transaction.currentTransaction)throw new Error("StreamLoop/CellLoop must be used within an explicit transaction");return e}return r(e,t),e.prototype.loop=function(t){var e=this;if(this.assigned__)throw new Error("StreamLoop looped more than once");this.assigned__=!0,this.vertex.addSource(new i.Source(t.getVertex__(),function(){return t.listen_(e.vertex,function(t){e.send_(t)},!1)}))},e}(h);e.StreamLoop=d},n.f[4]=function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r=n.r(20),o=function(){function t(e,n){this.rank=e,this.action=n,this.seq=t.nextSeq++}return t.prototype.toString=function(){return this.seq.toString()},t.nextSeq=0,t}(),i=function(){function t(){this.inCallback=0,this.toRegen=!1,this.prioritizedQ=new r.PriorityQueue(function(t,e){return t.rank.rank<e.rank.rank?1:t.rank.rank>e.rank.rank?-1:t.seq<e.seq?1:t.seq>e.seq?-1:0}),this.entries=new r.Set(function(t){return t.toString()}),this.lastQ=[],this.postQ=null}return t.prototype.requestRegen=function(){this.toRegen=!0},t.prototype.prioritized=function(t,e){var n=new o(t,e);this.prioritizedQ.enqueue(n),this.entries.add(n)},t.prototype.last=function(t){this.lastQ.push(t)},t.prototype.post=function(t,e){for(null==this.postQ&&(this.postQ=[]);this.postQ.length<=t;)this.postQ.push(null);var n=this.postQ[t],r=null===n?e:function(){n(),e()};this.postQ[t]=r},t.prototype.checkRegen=function(){if(this.toRegen){this.toRegen=!1,this.prioritizedQ.clear();for(var t=this.entries.toArray(),e=0;e<t.length;e++)this.prioritizedQ.enqueue(t[e])}},t.prototype.isActive=function(){return!!t.currentTransaction},t.prototype.close=function(){for(;this.checkRegen(),!this.prioritizedQ.isEmpty();){var e=this.prioritizedQ.dequeue();this.entries.remove(e),e.action()}for(n=0;n<this.lastQ.length;n++)this.lastQ[n]();if(this.lastQ=[],null!=this.postQ){for(var n=0;n<this.postQ.length;n++)if(null!=this.postQ[n]){var r=t.currentTransaction;try{if(n>0){t.currentTransaction=new t;try{this.postQ[n](),t.currentTransaction.close()}catch(e){throw t.currentTransaction.close(),e}}else t.currentTransaction=null,this.postQ[n]();t.currentTransaction=r}catch(e){throw t.currentTransaction=r,e}}this.postQ=null}},t.onStart=function(e){t.onStartHooks.push(e)},t.run=function(e){var n=t.currentTransaction;if(null===n){if(!t.runningOnStartHooks){t.runningOnStartHooks=!0;try{for(var r=0;r<t.onStartHooks.length;r++)t.onStartHooks[r]()}finally{t.runningOnStartHooks=!1}}t.currentTransaction=new t}try{var o=e();return null===n&&(t.currentTransaction.close(),t.currentTransaction=null),o}catch(e){throw null===n&&(t.currentTransaction.close(),t.currentTransaction=null),e}},t.currentTransaction=null,t.onStartHooks=[],t.runningOnStartHooks=!1,t}();e.Transaction=i},n.f[5]=function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r=n.r(1),o=n.r(4),i=function(){function t(t,e){this.f=r.Lambda2_toFunction(t),this.out=e,this.out.getVertex__().sources=this.out.getVertex__().sources.concat(r.toSources(r.Lambda2_deps(t))),this.accumValid=!1}return t.prototype.send_=function(t){var e=this;this.accumValid?this.accum=this.f(this.accum,t):(o.Transaction.currentTransaction.prioritized(this.out.getVertex__(),function(){e.out.send_(e.accum),e.accumValid=!1,e.accum=null}),this.accum=t,this.accumValid=!0)},t}();e.CoalesceHandler=i},n.f[6]=function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r=n.r(1),o=n.r(2),i=n.r(4),u=n.r(7),s=n.r(3),a=n.r(8),c=function(t){this.hasValue=!1,this.value=null,this.cell=t},l=function(){this.f=null,this.f_present=!1,this.a=null,this.a_present=!1},f=function(){function t(t,e){var n=this;this.value=t,e?i.Transaction.run(function(){return n.setStream(e)}):(this.str=new s.Stream,this.vertex=new o.Vertex("ConstCell",0,[]))}return t.prototype.setStream=function(t){var e=this;this.str=t;var n=this,r=new o.Source(t.getVertex__(),function(){return t.listen_(n.vertex,function(t){null==n.valueUpdate&&i.Transaction.currentTransaction.last(function(){n.value=n.valueUpdate,n.lazyInitValue=null,n.valueUpdate=null}),n.valueUpdate=t},!1)});this.vertex=new o.Vertex("Cell",0,[r]),this.vertex.register(o.Vertex.NULL),i.Transaction.currentTransaction.last(function(){e.vertex.deregister(o.Vertex.NULL)})},t.prototype.getVertex__=function(){return this.vertex},t.prototype.getStream__=function(){return this.str},t.prototype.sample=function(){var t=this;return i.Transaction.run(function(){return t.sampleNoTrans__()})},t.prototype.sampleNoTrans__=function(){return this.value},t.prototype.sampleLazy=function(){var t=this;return i.Transaction.run(function(){return t.sampleLazyNoTrans__()})},t.prototype.sampleLazyNoTrans__=function(){var t=this,e=new c(t);return i.Transaction.currentTransaction.last(function(){e.value=null!=t.valueUpdate?t.valueUpdate:t.sampleNoTrans__(),e.hasValue=!0,e.cell=null}),new u.Lazy(function(){return e.hasValue?e.value:e.cell.sample()})},t.prototype.map=function(t){var e=this;return i.Transaction.run(function(){return a.Operational.updates(e).map(t).holdLazy(e.sampleLazy().map(r.Lambda1_toFunction(t)))})},t.prototype.lift=function(e,n){var o=r.Lambda2_toFunction(n),i=this.map(function(t){return function(e){return o(t,e)}});return t.apply(i,e,r.toSources(r.Lambda2_deps(n)))},t.prototype.lift3=function(e,n,o){var i=r.Lambda3_toFunction(o),u=this.map(function(t){return function(e){return function(n){return i(t,e,n)}}});return t.apply(t.apply(u,e),n,r.toSources(r.Lambda3_deps(o)))},t.prototype.lift4=function(e,n,o,i){var u=r.Lambda4_toFunction(i),s=this.map(function(t){return function(e){return function(n){return function(r){return u(t,e,n,r)}}}});return t.apply(t.apply(t.apply(s,e),n),o,r.toSources(r.Lambda4_deps(i)))},t.prototype.lift5=function(e,n,o,i,u){var s=r.Lambda5_toFunction(u),a=this.map(function(t){return function(e){return function(n){return function(r){return function(o){return s(t,e,n,r,o)}}}}});return t.apply(t.apply(t.apply(t.apply(a,e),n),o),i,r.toSources(r.Lambda5_deps(u)))},t.prototype.lift6=function(e,n,o,i,u,s){var a=r.Lambda6_toFunction(s),c=this.map(function(t){return function(e){return function(n){return function(r){return function(o){return function(i){return a(t,e,n,r,o,i)}}}}}});return t.apply(t.apply(t.apply(t.apply(t.apply(c,e),n),o),i),u,r.toSources(r.Lambda6_deps(s)))},t.apply=function(t,e,n){return i.Transaction.run(function(){var r=new l,i=new s.StreamWithSend,c=a.Operational.value(t),f=a.Operational.value(e),p=new o.Source(c.getVertex__(),function(){return c.listen_(i.getVertex__(),function(t){r.f=t,r.f_present=!0,r.a_present&&i.send_(r.f(r.a))},!1)}),h=new o.Source(f.getVertex__(),function(){return f.listen_(i.getVertex__(),function(t){r.a=t,r.a_present=!0,r.f_present&&i.send_(r.f(r.a))},!1)});return i.setVertex__(new o.Vertex("apply",0,[p,h].concat(n||[]))),i.coalesce__(function(t,e){return e}).holdLazy(new u.Lazy(function(){return t.sampleNoTrans__()(e.sampleNoTrans__())}))})},t.switchC=function(t){return i.Transaction.run(function(){var e=t.sampleLazy().map(function(t){return t.sample()}),n=new s.StreamWithSend,r=null,i=a.Operational.value(t),u=new o.Source(i.getVertex__(),function(){var t=null===r?null:a.Operational.value(r).listen_(n.getVertex__(),function(t){return n.send_(t)},!1),e=i.listen_(n.getVertex__(),function(e){r=e,null!==t&&t(),t=a.Operational.value(e).listen_(n.getVertex__(),function(t){return n.send_(t)},!1)},!1);return function(){e(),t()}});return n.setVertex__(new o.Vertex("switchC",0,[u])),n.coalesce__(function(t,e){return e}).holdLazy(e)})},t.switchS=function(t){return i.Transaction.run(function(){var e=new s.StreamWithSend,n=function(t){e.send_(t)},r=new o.Source(t.getVertex__(),function(){var r=t.sampleNoTrans__().listen_(e.getVertex__(),n,!1),o=t.getStream__().listen_(e.getVertex__(),function(t){r(),r=t.listen_(e.getVertex__(),n,!0)},!1);return function(){o(),r()}});return e.setVertex__(new o.Vertex("switchS",0,[r])),e})},t.prototype.listen=function(t){var e=this;return i.Transaction.run(function(){return a.Operational.value(e).listen(t)})},t["fantasy-land/of"]=function(e){return new t(e)},t.prototype["fantasy-land/map"]=function(t){return this.map(t)},t.prototype["fantasy-land/ap"]=function(e){return t.apply(e,this)},t.prototype["fantasy-land/chain"]=function(e){return t.switchC(this.map(e))},t.prototype["fantasy-land/extend"]=function(e){return new t(e(this))},t.prototype["fantasy-land/extract"]=function(){return this.sample()},t}();e.Cell=f},n.f[7]=function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this.f=t}return t.prototype.get=function(){return this.f()},t.prototype.map=function(e){var n=this;return new t(function(){return e(n.f())})},t.prototype.lift=function(e,n){var r=this;return new t(function(){return n(r.f(),e.f())})},t.prototype.lift3=function(e,n,r){var o=this;return new t(function(){return r(o.f(),e.f(),n.f())})},t.prototype.lift4=function(e,n,r,o){var i=this;return new t(function(){return o(i.f(),e.f(),n.f(),r.f())})},t}();e.Lazy=n},n.f[8]=function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r=n.r(3),o=n.r(4),i=n.r(9),u=n.r(2),s=function(){function t(){}return t.updates=function(t){return t.getStream__()},t.value=function(e){return o.Transaction.run(function(){var n=new r.StreamWithSend;o.Transaction.currentTransaction.prioritized(n.getVertex__(),function(){n.send_(i.Unit.UNIT)});var u=n.snapshot1(e);return t.updates(e).orElse(u)})},t.defer=function(e){return t.split(e.map(function(t){return[t]}))},t.split=function(t){var e=new r.StreamWithSend(null);return e.setVertex__(new u.Vertex("split",0,[new u.Source(t.getVertex__(),function(){return t.listen_(e.getVertex__(),function(t){for(var n=0;n<t.length;n++)!function(n){o.Transaction.currentTransaction.post(n,function(){o.Transaction.run(function(){e.send_(t[n])})})}(n)},!1)})])),e},t}();e.Operational=s},n.f[9]=function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.UNIT=new t,t}();e.Unit=n},n.f[10]=function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e){this.h=t,this.target=e};e.Listener=n},n.f[11]=function(t,e){var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n.r(6),i=n.r(4),u=function(t){function e(e,n){var r=t.call(this,null,null)||this;return i.Transaction.run(function(){n&&r.setStream(n),r.lazyInitValue=e}),r}return r(e,t),e.prototype.sampleNoTrans__=function(){return null==this.value&&null!=this.lazyInitValue&&(this.value=this.lazyInitValue.get(),this.lazyInitValue=null),this.value},e}(o.Cell);e.LazyCell=u},n.f[12]=function(t,e){var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n.r(3),i=n.r(5),u=n.r(4),s=function(t){function e(e){var n=t.call(this)||this;return e||(e=function(t,e){throw new Error("send() called more than once per transaction, which isn't allowed. Did you want to combine the events? Then pass a combining function to your StreamSink constructor.")}),n.coalescer=new i.CoalesceHandler(e,n),n}return r(e,t),e.prototype.send=function(t){var e=this;u.Transaction.run(function(){if(u.Transaction.currentTransaction.inCallback>0)throw new Error("You are not allowed to use send() inside a Sodium callback");e.coalescer.send_(t)})},e}(o.StreamWithSend);e.StreamSink=s},n.f[13]=function(t,e){var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n.r(11),i=n.r(4),u=n.r(3),s=function(t){function e(){return t.call(this,null,new u.StreamLoop)||this}return r(e,t),e.prototype.loop=function(t){var e=this;i.Transaction.run(function(){e.getStream__().loop(t.getStream__()),e.lazyInitValue=t.sampleLazy()})},e.prototype.sampleNoTrans__=function(){if(!this.getStream__().assigned__)throw new Error("CellLoop sampled before it was looped");return t.prototype.sampleNoTrans__.call(this)},e}(o.LazyCell);e.CellLoop=s},n.f[14]=function(t,e){var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n.r(6),i=n.r(12),u=function(t){function e(e,n){return t.call(this,e,new i.StreamSink(n))||this}return r(e,t),e.prototype.send=function(t){this.getStream__().send(t)},e}(o.Cell);e.CellSink=u},n.f[15]=function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e){this.a=t,this.b=e};e.Tuple2=n},n.f[16]=function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r=n.r(2),o=n.r(20),i=n.r(3),u=n.r(14),s=n.r(4),a=function(){};e.TimerSystemImpl=a;var c=0,l=function(t,e){this.t=t,this.sAlarm=e,this.seq=++c},f=function(){function t(t){var e=this;this.eventQueue=new o.BSTree(function(t,e){return t.t<e.t?-1:t.t>e.t?1:t.seq<e.seq?-1:t.seq>e.seq?1:0}),s.Transaction.run(function(){e.impl=t,e.tMinimum=0;var n=new u.CellSink(t.now());e.time=n,e.time.listen(function(t){}),s.Transaction.onStart(function(){for(var r=e.tMinimum=Math.max(e.tMinimum,t.now());"break"!==function(){var t=null;if(!e.eventQueue.isEmpty()){var o=e.eventQueue.minimum();o.t<=r&&(t=o)}if(null==t)return"break";n.send(t.t),s.Transaction.run(function(){return t.sAlarm.send_(t.t)})}(););n.send(r)})})}return t.prototype.at=function(t){var e=this,n=null,o=null,u=!1,a=null,c=!1,f=new i.StreamWithSend(null),p=function(){null!==o&&(o(),e.eventQueue.remove(n)),o=null,n=null,u&&(c||(c=!0,a=t.sampleNoTrans__()),null!==a&&(n=new l(a,f),e.eventQueue.add(n),o=e.impl.setTimer(a,function(){e.tMinimum=Math.max(e.tMinimum,a),s.Transaction.run(function(){})})))};return f.setVertex__(new r.Vertex("at",0,[new r.Source(t.getVertex__(),function(){u=!0,c=!1,s.Transaction.currentTransaction.prioritized(f.getVertex__(),p);var e=t.getStream__().listen_(f.getVertex__(),function(t){a=t,c=!0,p()},!1);return function(){u=!1,p(),e()}})])),f},t}();e.TimerSystem=f},n.f[17]=function(t,e){var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n.r(16),i=function(t){function e(){return t.call(this,new u)||this}return r(e,t),e}(o.TimerSystem);e.SecondsTimerSystem=i;var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.setTimer=function(t,e){var n=setTimeout(e,Math.max(1e3*(t-this.now()),0));return function(){clearTimeout(n)}},e.prototype.now=function(){return.001*Date.now()},e}(o.TimerSystemImpl)},n.f[18]=function(t,e){var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n.r(16),i=function(t){function e(){return t.call(this,new u)||this}return r(e,t),e}(o.TimerSystem);e.MillisecondsTimerSystem=i;var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.setTimer=function(t,e){var n=setTimeout(e,Math.max(t-this.now(),0));return function(){clearTimeout(n)}},e.prototype.now=function(){return Date.now()},e}(o.TimerSystemImpl)},n.f[19]=function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r=n.r(3),o=n.r(2),i=n.r(4),u=function(){function t(){}return t.fromAsync=function(t){return function(e){var n=new r.StreamWithSend(null);return n.setVertex__(new o.Vertex("map",0,[new o.Source(e.getVertex__(),function(){return e.listen_(n.getVertex__(),function(e){t(e,function(t){i.Transaction.run(function(){n.send_(t)})})},!1)})])),n}},t}();e.IOAction=u},n.f[20]=function(t,e){n.r(21);var r=n.r(26);e.BSTree=r.default;var o=n.r(32);e.PriorityQueue=o.default;var i=n.r(25);e.Set=i.default,n.r(22)},n.f[21]=function(t,e){function r(t,e,n){for(var r=n||o.defaultEquals,i=t.length,u=0;u<i;u++)if(r(t[u],e))return u;return-1}var o=n.r(22);e.indexOf=r,e.lastIndexOf=function(t,e,n){for(var r=n||o.defaultEquals,i=t.length-1;i>=0;i--)if(r(t[i],e))return i;return-1},e.contains=function(t,e,n){return r(t,e,n)>=0},e.remove=function(t,e,n){var o=r(t,e,n);return!(o<0||(t.splice(o,1),0))},e.frequency=function(t,e,n){for(var r=n||o.defaultEquals,i=t.length,u=0,s=0;s<i;s++)r(t[s],e)&&u++;return u},e.equals=function(t,e,n){var r=n||o.defaultEquals;if(t.length!==e.length)return!1;for(var i=t.length,u=0;u<i;u++)if(!r(t[u],e[u]))return!1;return!0},e.copy=function(t){return t.concat()},e.swap=function(t,e,n){if(e<0||e>=t.length||n<0||n>=t.length)return!1;var r=t[e];return t[e]=t[n],t[n]=r,!0},e.toString=function(t){return"["+t.toString()+"]"},e.forEach=function(t,e){for(var n=0,r=t;n<r.length;n++)if(!1===e(r[n]))return}},n.f[22]=function(t,e){function n(t){return"function"==typeof t}function r(t){return void 0===t}function o(t){return"[object String]"===Object.prototype.toString.call(t)}var i=Object.prototype.hasOwnProperty;e.has=function(t,e){return i.call(t,e)},e.defaultCompare=function(t,e){return t<e?-1:t===e?0:1},e.defaultEquals=function(t,e){return t===e},e.defaultToString=function(t){return null===t?"COLLECTION_NULL":r(t)?"COLLECTION_UNDEFINED":o(t)?"$s"+t:"$o"+t.toString()},e.makeString=function(t,n){if(void 0===n&&(n=","),null===t)return"COLLECTION_NULL";if(r(t))return"COLLECTION_UNDEFINED";if(o(t))return t.toString();var i="{",u=!0;for(var s in t)e.has(t,s)&&(u?u=!1:i+=n,i=i+s+":"+t[s]);return i+"}"},e.isFunction=n,e.isUndefined=r,e.isString=o,e.reverseCompareFunction=function(t){return n(t)?function(e,n){return-1*t(e,n)}:function(t,e){return t<e?1:t===e?0:-1}},e.compareToEquals=function(t){return function(e,n){return 0===t(e,n)}}},n.f[24]=function(t,e){var r=n.r(22),o=function(){function t(t){this.table={},this.nElements=0,this.toStr=t||r.defaultToString}return t.prototype.getValue=function(t){var e=this.table["$"+this.toStr(t)];if(!r.isUndefined(e))return e.value},t.prototype.setValue=function(t,e){if(!r.isUndefined(t)&&!r.isUndefined(e)){var n,o="$"+this.toStr(t),i=this.table[o];return r.isUndefined(i)?(this.nElements++,n=void 0):n=i.value,this.table[o]={key:t,value:e},n}},t.prototype.remove=function(t){var e="$"+this.toStr(t),n=this.table[e];if(!r.isUndefined(n))return delete this.table[e],this.nElements--,n.value},t.prototype.keys=function(){var t=[];for(var e in this.table)if(r.has(this.table,e)){var n=this.table[e];t.push(n.key)}return t},t.prototype.values=function(){var t=[];for(var e in this.table)if(r.has(this.table,e)){var n=this.table[e];t.push(n.value)}return t},t.prototype.forEach=function(t){for(var e in this.table)if(r.has(this.table,e)){var n=this.table[e];if(!1===t(n.key,n.value))return}},t.prototype.containsKey=function(t){return!r.isUndefined(this.getValue(t))},t.prototype.clear=function(){this.table={},this.nElements=0},t.prototype.size=function(){return this.nElements},t.prototype.isEmpty=function(){return this.nElements<=0},t.prototype.toString=function(){var t="{";return this.forEach(function(e,n){t+="\n\t"+e+" : "+n}),t+"\n}"},t}();Object.defineProperty(e,"__esModule",{value:!0}),e.default=o},n.f[25]=function(t,e){var r=n.r(22),o=n.r(21),i=n.r(24),u=function(){function t(t){this.dictionary=new i.default(t)}return t.prototype.contains=function(t){return this.dictionary.containsKey(t)},t.prototype.add=function(t){return!this.contains(t)&&!r.isUndefined(t)&&(this.dictionary.setValue(t,t),!0)},t.prototype.intersection=function(t){var e=this;this.forEach(function(n){return t.contains(n)||e.remove(n),!0})},t.prototype.union=function(t){var e=this;t.forEach(function(t){return e.add(t),!0})},t.prototype.difference=function(t){var e=this;t.forEach(function(t){return e.remove(t),!0})},t.prototype.isSubsetOf=function(t){if(this.size()>t.size())return!1;var e=!0;return this.forEach(function(n){return!!t.contains(n)||(e=!1,!1)}),e},t.prototype.remove=function(t){return!!this.contains(t)&&(this.dictionary.remove(t),!0)},t.prototype.forEach=function(t){this.dictionary.forEach(function(e,n){return t(n)})},t.prototype.toArray=function(){return this.dictionary.values()},t.prototype.isEmpty=function(){return this.dictionary.isEmpty()},t.prototype.size=function(){return this.dictionary.size()},t.prototype.clear=function(){this.dictionary.clear()},t.prototype.toString=function(){return o.toString(this.toArray())},t}();Object.defineProperty(e,"__esModule",{value:!0}),e.default=u},n.f[26]=function(t,e){var r=n.r(22),o=n.r(27),i=function(){function t(t){this.root=null,this.compare=t||r.defaultCompare,this.nElements=0}return t.prototype.add=function(t){return!r.isUndefined(t)&&null!==this.insertNode(this.createNode(t))&&(this.nElements++,!0)},t.prototype.clear=function(){this.root=null,this.nElements=0},t.prototype.isEmpty=function(){return 0===this.nElements},t.prototype.size=function(){return this.nElements},t.prototype.contains=function(t){return!r.isUndefined(t)&&null!==this.searchNode(this.root,t)},t.prototype.remove=function(t){var e=this.searchNode(this.root,t);return null!==e&&(this.removeNode(e),this.nElements--,!0)},t.prototype.inorderTraversal=function(t){this.inorderTraversalAux(this.root,t,{stop:!1})},t.prototype.preorderTraversal=function(t){this.preorderTraversalAux(this.root,t,{stop:!1})},t.prototype.postorderTraversal=function(t){this.postorderTraversalAux(this.root,t,{stop:!1})},t.prototype.levelTraversal=function(t){this.levelTraversalAux(this.root,t)},t.prototype.minimum=function(){if(!this.isEmpty())return this.minimumAux(this.root).element},t.prototype.maximum=function(){if(!this.isEmpty())return this.maximumAux(this.root).element},t.prototype.forEach=function(t){this.inorderTraversal(t)},t.prototype.toArray=function(){var t=[];return this.inorderTraversal(function(e){return t.push(e),!0}),t},t.prototype.height=function(){return this.heightAux(this.root)},t.prototype.searchNode=function(t,e){for(var n=null;null!==t&&0!==n;)(n=this.compare(e,t.element))<0?t=t.leftCh:n>0&&(t=t.rightCh);return t},t.prototype.transplant=function(t,e){null===t.parent?this.root=e:t===t.parent.leftCh?t.parent.leftCh=e:t.parent.rightCh=e,null!==e&&(e.parent=t.parent)},t.prototype.removeNode=function(t){if(null===t.leftCh)this.transplant(t,t.rightCh);else if(null===t.rightCh)this.transplant(t,t.leftCh);else{var e=this.minimumAux(t.rightCh);e.parent!==t&&(this.transplant(e,e.rightCh),e.rightCh=t.rightCh,e.rightCh.parent=e),this.transplant(t,e),e.leftCh=t.leftCh,e.leftCh.parent=e}},t.prototype.inorderTraversalAux=function(t,e,n){null===t||n.stop||(this.inorderTraversalAux(t.leftCh,e,n),n.stop||(n.stop=!1===e(t.element),n.stop||this.inorderTraversalAux(t.rightCh,e,n)))},t.prototype.levelTraversalAux=function(t,e){var n=new o.default;for(null!==t&&n.enqueue(t);!n.isEmpty();){if(t=n.dequeue(),!1===e(t.element))return;null!==t.leftCh&&n.enqueue(t.leftCh),null!==t.rightCh&&n.enqueue(t.rightCh)}},t.prototype.preorderTraversalAux=function(t,e,n){null===t||n.stop||(n.stop=!1===e(t.element),n.stop||(this.preorderTraversalAux(t.leftCh,e,n),n.stop||this.preorderTraversalAux(t.rightCh,e,n)))},t.prototype.postorderTraversalAux=function(t,e,n){null===t||n.stop||(this.postorderTraversalAux(t.leftCh,e,n),n.stop||(this.postorderTraversalAux(t.rightCh,e,n),n.stop||(n.stop=!1===e(t.element))))},t.prototype.minimumAux=function(t){for(;null!==t.leftCh;)t=t.leftCh;return t},t.prototype.maximumAux=function(t){for(;null!==t.rightCh;)t=t.rightCh;return t},t.prototype.heightAux=function(t){return null===t?-1:Math.max(this.heightAux(t.leftCh),this.heightAux(t.rightCh))+1},t.prototype.insertNode=function(t){for(var e=null,n=this.root,r=null;null!==n;){if(0===(r=this.compare(t.element,n.element)))return null;r<0?(e=n,n=n.leftCh):(e=n,n=n.rightCh)}return t.parent=e,null===e?this.root=t:this.compare(t.element,e.element)<0?e.leftCh=t:e.rightCh=t,t},t.prototype.createNode=function(t){return{element:t,leftCh:null,rightCh:null,parent:null}},t}();Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},n.f[27]=function(t,e){var r=n.r(28),o=function(){function t(){this.list=new r.default}return t.prototype.enqueue=function(t){return this.list.add(t)},t.prototype.add=function(t){return this.list.add(t)},t.prototype.dequeue=function(){if(0!==this.list.size()){var t=this.list.first();return this.list.removeElementAtIndex(0),t}},t.prototype.peek=function(){if(0!==this.list.size())return this.list.first()},t.prototype.size=function(){return this.list.size()},t.prototype.contains=function(t,e){return this.list.contains(t,e)},t.prototype.isEmpty=function(){return this.list.size()<=0},t.prototype.clear=function(){this.list.clear()},t.prototype.forEach=function(t){this.list.forEach(t)},t}();Object.defineProperty(e,"__esModule",{value:!0}),e.default=o},n.f[28]=function(t,e){var r=n.r(22),o=n.r(21),i=function(){function t(){this.firstNode=null,this.lastNode=null,this.nElements=0}return t.prototype.add=function(t,e){if(r.isUndefined(e)&&(e=this.nElements),e<0||e>this.nElements||r.isUndefined(t))return!1;var n=this.createNode(t);if(0===this.nElements)this.firstNode=n,this.lastNode=n;else if(e===this.nElements)this.lastNode.next=n,this.lastNode=n;else if(0===e)n.next=this.firstNode,this.firstNode=n;else{var o=this.nodeAtIndex(e-1);n.next=o.next,o.next=n}return this.nElements++,!0},t.prototype.first=function(){if(null!==this.firstNode)return this.firstNode.element},t.prototype.last=function(){if(null!==this.lastNode)return this.lastNode.element},t.prototype.elementAtIndex=function(t){var e=this.nodeAtIndex(t);if(null!==e)return e.element},t.prototype.indexOf=function(t,e){var n=e||r.defaultEquals;if(r.isUndefined(t))return-1;for(var o=this.firstNode,i=0;null!==o;){if(n(o.element,t))return i;i++,o=o.next}return-1},t.prototype.contains=function(t,e){return this.indexOf(t,e)>=0},t.prototype.remove=function(t,e){var n=e||r.defaultEquals;if(this.nElements<1||r.isUndefined(t))return!1;for(var o=null,i=this.firstNode;null!==i;){if(n(i.element,t))return i===this.firstNode?(this.firstNode=this.firstNode.next,i===this.lastNode&&(this.lastNode=null)):i===this.lastNode?(this.lastNode=o,o.next=i.next,i.next=null):(o.next=i.next,i.next=null),this.nElements--,!0;o=i,i=i.next}return!1},t.prototype.clear=function(){this.firstNode=null,this.lastNode=null,this.nElements=0},t.prototype.equals=function(e,n){var o=n||r.defaultEquals;return e instanceof t&&this.size()===e.size()&&this.equalsAux(this.firstNode,e.firstNode,o)},t.prototype.equalsAux=function(t,e,n){for(;null!==t;){if(!n(t.element,e.element))return!1;t=t.next,e=e.next}return!0},t.prototype.removeElementAtIndex=function(t){if(!(t<0||t>=this.nElements)){var e;if(1===this.nElements)e=this.firstNode.element,this.firstNode=null,this.lastNode=null;else{var n=this.nodeAtIndex(t-1);null===n?(e=this.firstNode.element,this.firstNode=this.firstNode.next):n.next===this.lastNode&&(e=this.lastNode.element,this.lastNode=n),null!==n&&(e=n.next.element,n.next=n.next.next)}return this.nElements--,e}},t.prototype.forEach=function(t){for(var e=this.firstNode;null!==e&&!1!==t(e.element);)e=e.next},t.prototype.reverse=function(){for(var t=null,e=this.firstNode,n=null;null!==e;)n=e.next,e.next=t,t=e,e=n;n=this.firstNode,this.firstNode=this.lastNode,this.lastNode=n},t.prototype.toArray=function(){for(var t=[],e=this.firstNode;null!==e;)t.push(e.element),e=e.next;return t},t.prototype.size=function(){return this.nElements},t.prototype.isEmpty=function(){return this.nElements<=0},t.prototype.toString=function(){return o.toString(this.toArray())},t.prototype.nodeAtIndex=function(t){if(t<0||t>=this.nElements)return null;if(t===this.nElements-1)return this.lastNode;for(var e=this.firstNode,n=0;n<t;n++)e=e.next;return e},t.prototype.createNode=function(t){return{element:t,next:null}},t}();Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},n.f[29]=function(t,e){var r=n.r(22),o=n.r(21),i=function(){function t(t){this.data=[],this.compare=t||r.defaultCompare}return t.prototype.leftChildIndex=function(t){return 2*t+1},t.prototype.rightChildIndex=function(t){return 2*t+2},t.prototype.parentIndex=function(t){return Math.floor((t-1)/2)},t.prototype.minIndex=function(t,e){return e>=this.data.length?t>=this.data.length?-1:t:this.compare(this.data[t],this.data[e])<=0?t:e},t.prototype.siftUp=function(t){for(var e=this.parentIndex(t);t>0&&this.compare(this.data[e],this.data[t])>0;)o.swap(this.data,e,t),t=e,e=this.parentIndex(t)},t.prototype.siftDown=function(t){for(var e=this.minIndex(this.leftChildIndex(t),this.rightChildIndex(t));e>=0&&this.compare(this.data[t],this.data[e])>0;)o.swap(this.data,e,t),t=e,e=this.minIndex(this.leftChildIndex(t),this.rightChildIndex(t))},t.prototype.peek=function(){return this.data.length>0?this.data[0]:void 0},t.prototype.add=function(t){if(!r.isUndefined(t))return this.data.push(t),this.siftUp(this.data.length-1),!0},t.prototype.removeRoot=function(){if(this.data.length>0){var t=this.data[0];return this.data[0]=this.data[this.data.length-1],this.data.splice(this.data.length-1,1),this.data.length>0&&this.siftDown(0),t}},t.prototype.contains=function(t){var e=r.compareToEquals(this.compare);return o.contains(this.data,t,e)},t.prototype.size=function(){return this.data.length},t.prototype.isEmpty=function(){return this.data.length<=0},t.prototype.clear=function(){this.data.length=0},t.prototype.forEach=function(t){o.forEach(this.data,t)},t}();Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},n.f[32]=function(t,e){var r=n.r(22),o=n.r(29),i=function(){function t(t){this.heap=new o.default(r.reverseCompareFunction(t))}return t.prototype.enqueue=function(t){return this.heap.add(t)},t.prototype.add=function(t){return this.heap.add(t)},t.prototype.dequeue=function(){if(0!==this.heap.size()){var t=this.heap.peek();return this.heap.removeRoot(),t}},t.prototype.peek=function(){return this.heap.peek()},t.prototype.contains=function(t){return this.heap.contains(t)},t.prototype.isEmpty=function(){return this.heap.isEmpty()},t.prototype.size=function(){return this.heap.size()},t.prototype.clear=function(){this.heap.clear()},t.prototype.forEach=function(t){this.heap.forEach(t)},t}();Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},t.exports=n.r(0)},t.r(0)}($fsx);